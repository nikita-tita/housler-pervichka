# Housler Pervichka ‚Äî –ó–∞–¥–∞—á–∏

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ MVP –°–¥–µ–ª–∞–Ω–æ (30.11.2025)

**Backend:**
- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] Docker Compose (PostgreSQL + Redis)
- [x] –ü–∞—Ä—Å–µ—Ä XML-—Ñ–∏–¥–∞ (`yandex-feed.parser.ts`)
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (`001_init.sql`, `002_auth.sql`)
- [x] –ò–º–ø–æ—Ä—Ç-—Å–µ—Ä–≤–∏—Å (`import.service.ts`)
- [x] CLI –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ (`import-feed.ts`)
- [x] –°–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ (`offers.service.ts`)
- [x] API: GET /api/offers, GET /api/offers/:id, GET /api/filters
- [x] –≠–≤—Ä–∏—Å—Ç–∏–∫–∞ –µ–≤—Ä–æ-–ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫ (`euro-detector.ts`)
- [x] **API –∂–∏–ª—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤** ‚Äî GET /api/complexes, GET /api/complexes/:id
- [x] **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî POST /api/auth/request-code, POST /api/auth/verify-code, JWT
- [x] **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** ‚Äî GET/POST/DELETE /api/favorites
- [x] **–ü–æ–¥–±–æ—Ä–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤** ‚Äî /api/selections, /api/selections/shared/:code
- [x] **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî /api/bookings, /api/operator/bookings
- [x] **Cron** ‚Äî –∏–º–ø–æ—Ä—Ç —Ñ–∏–¥–∞ –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞

**Frontend:**
- [x] Next.js + Tailwind
- [x] –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ housler.ru (globals.css)
- [x] Layout —Å Header/Footer
- [x] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –±—ã—Å—Ç—Ä—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞ /offers
- [x] –ö–∞—Ä—Ç–æ—á–∫–∞ –æ–±—ä–µ–∫—Ç–∞ /offers/[id]
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç OfferCard
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Filters
- [x] API-—Å–µ—Ä–≤–∏—Å
- [x] **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî /login, AuthContext, JWT —Ç–æ–∫–µ–Ω—ã
- [x] **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** ‚Äî FavoritesContext, FavoriteButton, /favorites
- [x] **–ü–æ–¥–±–æ—Ä–∫–∏** ‚Äî /selections, /selections/:id, /s/:code (–ø—É–±–ª–∏—á–Ω–∞—è)
- [x] **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî BookingForm –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–±—ä–µ–∫—Ç–∞
- [x] **–°—Ç—Ä–∞–Ω–∏—Ü—ã –ñ–ö** ‚Äî /complexes, /complexes/:id
- [x] **–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é** ‚Äî —Ä–∞–±–æ—Ç–∞—é—â–µ–µ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π

**–î–µ–ø–ª–æ–π:**
- [x] –°–µ—Ä–≤–µ—Ä 91.229.8.221 (agent.housler.ru)
- [x] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
- [x] Docker Compose production
- [x] Nginx reverse proxy
- [x] 12,020 –æ–±—ä—è–≤–ª–µ–Ω–∏–π, 183 –ñ–ö

---

## üü° –í–∞–∂–Ω–æ (–ø–æ—Å–ª–µ MVP)

### 1. Frontend ‚Äî –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- [x] **1.1** –ò–ø–æ—Ç–µ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (–ø—Ä–æ—Å—Ç–æ–π) ‚úÖ
- [x] **1.2** –ö–∞—Ä—Ç–∞ Yandex Maps (embed –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±—ä–µ–∫—Ç–∞) ‚úÖ
- [x] **1.3** –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ URL ‚úÖ
- [ ] **1.4** –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ‚Äî GET /api/dictionaries/:type (districts, metro)
- [x] **1.5** –°—á—ë—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚úÖ

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- [x] **8.1** –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ñ–ö ‚úÖ
- [ ] **8.2** –ü–æ–¥—Å–∫–∞–∑–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–∏—Å–∫–∞ (–ñ–ö, —Ä–∞–π–æ–Ω—ã, –º–µ—Ç—Ä–æ)
- [ ] **8.3** –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–æ–∏—Å–∫–∏
- [x] **8.4** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (—Ü–µ–Ω–∞, –ø–ª–æ—â–∞–¥—å, –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) ‚úÖ

### 9. –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω
- [ ] **9.1** –¢–∞–±–ª–∏—Ü–∞ price_history (offer_id, price, recorded_at)
- [ ] **9.2** –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã
- [ ] **9.3** –ì—Ä–∞—Ñ–∏–∫ —Ü–µ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –æ–±—ä–µ–∫—Ç–∞

### 10. –ö–∞—Ä—Ç–∞
- [ ] **10.1** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–µ–π
- [ ] **10.2** –ü–æ–∏—Å–∫ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] **10.3** –ú–∞—Ä—à—Ä—É—Ç –¥–æ –º–µ—Ç—Ä–æ

---

## üü¢ –£–ª—É—á—à–µ–Ω–∏—è (–≠—Ç–∞–ø 2+)

### 11. Yandex GPT
- [ ] **11.1** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API
- [ ] **11.2** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: —Ç–∏–ø —Å–¥–µ–ª–∫–∏, —ç—Å–∫—Ä–æ—É, –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã
- [ ] **11.3** –§–∏–ª—å—Ç—Ä—ã –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- [ ] **11.4** AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–∏—Å–∫–∞ (NLP)

### 12. –í–Ω–µ—à–Ω–∏–µ API
- [ ] **12.1** –†–µ–≥–∏–æ–Ω –ø—Ä–æ–ø–∏—Å–∫–∏ (–≥–µ–æ–∫–æ–¥–µ—Ä)
- [ ] **12.2** –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë
- [ ] **12.3** DaData –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤

### 13. –†—É—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] **13.1** –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –±–∞–Ω–∫–æ–≤
- [ ] **13.2** –ò–ø–æ—Ç–µ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- [ ] **13.3** –ê–∫–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏–∏ –ñ–ö
- [ ] **13.4** –†–∞—Å—Å—Ä–æ—á–∫–∞ –æ—Ç –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤
- [ ] **13.5** –ê–∫—Ü–∏–∏
- [ ] **13.6** –ê–¥–º–∏–Ω–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã

```
–ù–µ–¥–µ–ª—è 1: –ó–∞–¥–∞—á–∏ 1-2 (API + –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
–ù–µ–¥–µ–ª—è 2: –ó–∞–¥–∞—á–∏ 3-5 (–ü–æ–¥–±–æ—Ä–∫–∏, –ò–∑–±—Ä–∞–Ω–Ω–æ–µ, –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
–ù–µ–¥–µ–ª—è 3: –ó–∞–¥–∞—á–∏ 6-7 (Cron + Frontend –¥–æ—Ä–∞–±–æ—Ç–∫–∏)
–ù–µ–¥–µ–ª—è 4: –ó–∞–¥–∞—á–∏ 8-10 (–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞, –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω, –ö–∞—Ä—Ç–∞)
```

---

## –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞
docker-compose up -d

# Backend (dev)
cd backend && npm run dev

# Frontend (dev)
cd frontend && npm run dev

# –ò–º–ø–æ—Ä—Ç —Ñ–∏–¥–∞
cd backend && npm run import:feed -- --file=./feeds/spb_.xml --migrate

# –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
cd backend && npm run db:migrate
```
