# Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Housler

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0
**Ğ”Ğ°Ñ‚Ğ°:** 2025-11-30
**Ğ ĞµÑ„ĞµÑ€ĞµĞ½Ñ:** TrendAgent (spb.trendagent.ru)

---

## ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

1. [ĞĞ±Ğ·Ğ¾Ñ€ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ](#1-Ğ¾Ğ±Ğ·Ğ¾Ñ€-Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ)
2. [Ğ¤Ğ°Ğ·Ğ° 1: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ](#2-Ñ„Ğ°Ğ·Ğ°-1-Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ-Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ)
3. [Ğ¤Ğ°Ğ·Ğ° 2: Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ](#3-Ñ„Ğ°Ğ·Ğ°-2-Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ‹-Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ)
4. [Ğ¤Ğ°Ğ·Ğ° 3: ĞĞ³ĞµĞ½Ñ‚ÑĞºĞ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹](#4-Ñ„Ğ°Ğ·Ğ°-3-Ğ°Ğ³ĞµĞ½Ñ‚ÑĞºĞ¸Ğµ-Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹)
5. [Ğ¤Ğ°Ğ·Ğ° 4: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹](#5-Ñ„Ğ°Ğ·Ğ°-4-Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ-Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹)
6. [Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#6-Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
7. [ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ¾Ğ°Ğ´Ğ¼Ğ°Ğ¿](#7-Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ-Ğ¸-Ñ€Ğ¾Ğ°Ğ´Ğ¼Ğ°Ğ¿)

---

## 1. ĞĞ±Ğ·Ğ¾Ñ€ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ

### 1.1 Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (Next.js 14)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pages:                    â”‚  Components:                        â”‚
â”‚  â€¢ /offers (ÑĞ¿Ğ¸ÑĞ¾Ğº)        â”‚  â€¢ Filters.tsx                      â”‚
â”‚  â€¢ /offers/[id] (Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸)   â”‚  â€¢ OfferCard.tsx                    â”‚
â”‚  â€¢ /map (ĞºĞ°Ñ€Ñ‚Ğ°)            â”‚  â€¢ SearchAutocomplete.tsx           â”‚
â”‚  â€¢ /complexes (Ğ–Ğš)         â”‚  â€¢ YandexMap.tsx                    â”‚
â”‚  â€¢ /compare (ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ)    â”‚  â€¢ MortgageCalculator.tsx           â”‚
â”‚  â€¢ /favorites              â”‚  â€¢ PriceHistoryChart.tsx            â”‚
â”‚  â€¢ /selections             â”‚  â€¢ CompareFloatingBar.tsx           â”‚
â”‚  â€¢ /s/[code] (ÑˆĞ°Ñ€Ğ¸Ğ½Ğ³)      â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Contexts:                 â”‚  Services:                          â”‚
â”‚  â€¢ AuthContext             â”‚  â€¢ api.ts (REST client)             â”‚
â”‚  â€¢ FavoritesContext        â”‚                                     â”‚
â”‚  â€¢ CompareContext          â”‚                                     â”‚
â”‚  â€¢ ClientSelectionContext  â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (Express + TypeScript)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Routes:                   â”‚  Services:                          â”‚
â”‚  â€¢ /api/offers             â”‚  â€¢ offers.service.ts                â”‚
â”‚  â€¢ /api/complexes          â”‚  â€¢ complexes.service.ts             â”‚
â”‚  â€¢ /api/filters            â”‚  â€¢ selections.service.ts            â”‚
â”‚  â€¢ /api/selections         â”‚  â€¢ bookings.service.ts              â”‚
â”‚  â€¢ /api/bookings           â”‚  â€¢ auth.service.ts                  â”‚
â”‚  â€¢ /api/favorites          â”‚                                     â”‚
â”‚  â€¢ /api/auth               â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE (PostgreSQL)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tables:                                                         â”‚
â”‚  â€¢ offers (ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹) â”€â”€â”€â”€â”€â”€â”€ built_year, ready_quarter âœ“        â”‚
â”‚  â€¢ complexes (Ğ–Ğš) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ developer_id âœ“                     â”‚
â”‚  â€¢ buildings (ĞºĞ¾Ñ€Ğ¿ÑƒÑĞ°) â”€â”€â”€â”€â”€ building_type, ceiling_height âœ“    â”‚
â”‚  â€¢ developers (Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ¸)                                      â”‚
â”‚  â€¢ districts (Ñ€Ğ°Ğ¹Ğ¾Ğ½Ñ‹)                                            â”‚
â”‚  â€¢ metro_stations (Ğ¼ĞµÑ‚Ñ€Ğ¾)                                        â”‚
â”‚  â€¢ selections, selection_items                                   â”‚
â”‚  â€¢ bookings                                                      â”‚
â”‚  â€¢ users                                                         â”‚
â”‚  â€¢ price_history                                                 â”‚
â”‚                                                                  â”‚
â”‚  Views:                                                          â”‚
â”‚  â€¢ offers_full (Ğ´ĞµĞ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Ğ£Ğ¶Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹

| Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ | Backend | Frontend | URL param |
|--------|---------|----------|-----------|
| ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ | âœ“ | âœ“ | `rooms=1,2,3` |
| Ğ¡Ñ‚ÑƒĞ´Ğ¸Ñ | âœ“ | âœ“ | `is_studio=true` |
| Ğ¦ĞµĞ½Ğ° Ğ¾Ñ‚/Ğ´Ğ¾ | âœ“ | âœ“ | `price_min`, `price_max` |
| ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ Ğ¾Ñ‚/Ğ´Ğ¾ | âœ“ | âœ“ | `area_min`, `area_max` |
| Ğ Ğ°Ğ¹Ğ¾Ğ½ | âœ“ | âœ“ (single) | `districts=Name` |
| ĞœĞµÑ‚Ñ€Ğ¾ | âœ“ | âœ“ (single) | `metro_stations=Name` |
| Ğ¡ Ğ¾Ñ‚Ğ´ĞµĞ»ĞºĞ¾Ğ¹ | âœ“ | âœ“ | `has_finishing=true` |
| ĞŸĞ¾Ğ¸ÑĞº | âœ“ | âœ“ | `search=text` |
| Ğ­Ñ‚Ğ°Ğ¶ Ğ¾Ñ‚/Ğ´Ğ¾ | âœ“ | âœ— | `floor_min`, `floor_max` |
| ĞĞµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹/Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ | âœ“ | âœ— | `not_first_floor`, `not_last_floor` |
| Ğ’Ñ€ĞµĞ¼Ñ Ğ´Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¾ | âœ“ | âœ— | `metro_time_max=15` |
| Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ¼Ğ° | âœ“ | âœ— | `building_state=hand-over` |
| Ğ¢Ğ¸Ğ¿ Ğ¾Ñ‚Ğ´ĞµĞ»ĞºĞ¸ | âœ“ | âœ— | `renovation=Ğ§Ğ¸ÑÑ‚Ğ¾Ğ²Ğ°Ñ` |

### 1.3 Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ‘Ğ”, Ğ½Ğ¾ Ğ±ĞµĞ· Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² Ğ² API

| ĞŸĞ¾Ğ»Ğµ | Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------|---------|-----|----------|
| `built_year` | buildings, offers | INTEGER | Ğ“Ğ¾Ğ´ ÑĞ´Ğ°Ñ‡Ğ¸ (2024, 2025...) |
| `ready_quarter` | buildings, offers | INTEGER | ĞšĞ²Ğ°Ñ€Ñ‚Ğ°Ğ» ÑĞ´Ğ°Ñ‡Ğ¸ (1-4) |
| `developer_id` | complexes | INTEGER FK | Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº |
| `building_type` | buildings | VARCHAR | ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚, Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ, ĞºĞ¸Ñ€Ğ¿Ğ¸Ñ‡ |
| `ceiling_height` | buildings | DECIMAL | Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¿Ğ¾Ñ‚Ğ¾Ğ»ĞºĞ¾Ğ² |
| `area_kitchen` | offers | DECIMAL | ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ ĞºÑƒÑ…Ğ½Ğ¸ |
| `has_parking` | buildings | BOOLEAN | ĞĞ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¿Ğ°Ñ€ĞºĞ¸Ğ½Ğ³Ğ° |

---

## 2. Ğ¤Ğ°Ğ·Ğ° 1: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ

### 2.1 Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ€Ğ¾ĞºÑƒ ÑĞ´Ğ°Ñ‡Ğ¸

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ Ğ¿Ğ¾ ÑÑ€Ğ¾ĞºÑƒ ÑĞ´Ğ°Ñ‡Ğ¸ Ğ´Ğ¾Ğ¼Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ Ñ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ğ·Ğ°ÑĞµĞ»ĞµĞ½Ğ¸Ñ.

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹:**
- "Ğ¡Ğ´Ğ°Ğ½" (building_state = 'hand-over')
- "Ğ”Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° 2025" (built_year <= 2025)
- "2025" (built_year = 2025)
- "2026" (built_year = 2026)
- "2027+" (built_year >= 2027)

**UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Ğ¡Ğ´Ğ°Ğ½] [2025] [2026] [2027+]        â”‚  â† chip-buttons, multiple select
â”‚                                     â”‚
â”‚ â—‹ Ğ¡ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° Ğ³Ğ¾Ğ´Ğ°           â”‚  â† Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Backend: offers.service.ts**

```typescript
// ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
interface OfferFilters {
  // ... existing
  completion_status?: 'completed' | 'this_year' | 'next_year' | 'future';
  built_year?: number[];        // [2025, 2026]
  ready_quarter?: number[];     // [1, 2, 3, 4]
}

// SQL ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ
private buildCompletionFilter(filters: OfferFilters): string {
  const conditions: string[] = [];

  if (filters.completion_status === 'completed') {
    conditions.push("b.building_state = 'hand-over'");
  }

  if (filters.built_year?.length) {
    conditions.push(`b.built_year = ANY($${paramIndex++})`);
  }

  if (filters.ready_quarter?.length) {
    conditions.push(`b.ready_quarter = ANY($${paramIndex++})`);
  }

  return conditions.join(' AND ');
}
```

**Backend: filters.routes.ts**

```typescript
// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² /api/filters Ğ¾Ñ‚Ğ²ĞµÑ‚
{
  completion_years: [
    { year: null, label: 'Ğ¡Ğ´Ğ°Ğ½', count: 1234 },
    { year: 2025, label: '2025', count: 567 },
    { year: 2026, label: '2026', count: 890 },
    { year: 2027, label: '2027+', count: 234 }
  ]
}
```

**Frontend: types/index.ts**

```typescript
interface OfferFilters {
  // ... existing
  built_years?: number[];
  completion_status?: 'completed' | 'this_year' | 'next_year' | 'future';
}

interface FilterOptions {
  // ... existing
  completion_years: { year: number | null; label: string; count: number }[];
}
```

**Frontend: Filters.tsx**

```tsx
// ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑÑ€Ğ¾ĞºĞ° ÑĞ´Ğ°Ñ‡Ğ¸
<div className="mb-6">
  <div className="text-sm font-medium mb-3">Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸</div>
  <div className="flex flex-wrap gap-2">
    {filterOptions?.completion_years?.map(({ year, label, count }) => (
      <button
        key={year ?? 'completed'}
        onClick={() => toggleCompletionYear(year)}
        className={`btn btn-sm ${
          isYearSelected(year) ? 'btn-primary' : 'btn-secondary'
        }`}
      >
        {label} <span className="text-xs opacity-70">({count})</span>
      </button>
    ))}
  </div>
</div>
```

**URL Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```
/offers?built_year=2025&built_year=2026
/offers?completion_status=completed
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| F1.1 | Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ built_year, ready_quarter Ğ² OfferFilters | 2h | - |
| F1.2 | Backend: SQL-Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ³Ğ¾Ğ´Ñƒ/ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»Ñƒ ÑĞ´Ğ°Ñ‡Ğ¸ | 2h | F1.1 |
| F1.3 | Backend: endpoint /api/filters - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ completion_years | 2h | F1.2 |
| F1.4 | Frontend: types - Ñ€Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ OfferFilters, FilterOptions | 1h | F1.3 |
| F1.5 | Frontend: api.ts - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ² buildQuery | 1h | F1.4 |
| F1.6 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ CompletionYearFilter | 3h | F1.5 |
| F1.7 | Frontend: Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Filters.tsx | 1h | F1.6 |
| F1.8 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | F1.7 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~14 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 2.2 Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºÑƒ

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ Ğ¿Ğ¾ Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºÑƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ñ‹Ñ… Ğ´ĞµĞ²ĞµĞ»Ğ¾Ğ¿ĞµÑ€Ğ¾Ğ².

**UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ°...         ]  â”‚  â† autocomplete
â”‚                                     â”‚
â”‚ Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾: ĞŸĞ˜Ğš, Setl City            â”‚  â† chips
â”‚          [Ã—]    [Ã—]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Backend: offers.service.ts**

```typescript
interface OfferFilters {
  // ... existing
  developer_ids?: number[];
}

// SQL: JOIN complexes c ON o.complex_id = c.id
// WHERE c.developer_id = ANY($developers)
```

**Backend: Ğ½Ğ¾Ğ²Ñ‹Ğ¹ endpoint**

```typescript
// GET /api/developers
// GET /api/developers/search?q=ĞŸĞ˜Ğš&limit=10

router.get('/developers', async (req, res) => {
  const developers = await db.query(`
    SELECT
      d.id,
      d.name,
      COUNT(DISTINCT o.id) as offers_count,
      COUNT(DISTINCT c.id) as complexes_count
    FROM developers d
    JOIN complexes c ON c.developer_id = d.id
    JOIN offers o ON o.complex_id = c.id
    WHERE o.is_active = true
    GROUP BY d.id
    ORDER BY offers_count DESC
  `);
  res.json({ success: true, data: developers.rows });
});
```

**Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ DeveloperFilter**

```tsx
function DeveloperFilter({ selected, onChange }) {
  const [search, setSearch] = useState('');
  const [suggestions, setSuggestions] = useState([]);

  // Debounced search
  useEffect(() => {
    if (search.length >= 2) {
      api.searchDevelopers(search).then(setSuggestions);
    }
  }, [search]);

  return (
    <div>
      <input
        placeholder="ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ°..."
        value={search}
        onChange={e => setSearch(e.target.value)}
      />
      {/* Suggestions dropdown */}
      {/* Selected chips */}
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| F2.1 | Backend: GET /api/developers endpoint | 2h | - |
| F2.2 | Backend: GET /api/developers/search endpoint | 1h | F2.1 |
| F2.3 | Backend: Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ developer_ids Ğ² offers.service | 2h | F2.1 |
| F2.4 | Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ developers Ğ² /api/filters | 1h | F2.1 |
| F2.5 | Frontend: api.ts - Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ getDevelopers, searchDevelopers | 1h | F2.4 |
| F2.6 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ DeveloperFilter Ñ autocomplete | 4h | F2.5 |
| F2.7 | Frontend: Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Filters.tsx | 1h | F2.6 |
| F2.8 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | F2.7 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~14 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 2.3 ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ² Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ…

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ¾Ğ²/ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ğ¹ Ğ¼ĞµÑ‚Ñ€Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ñ€Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¸ÑĞº Ğ´Ğ»Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°.

**Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ:** select Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ĞµĞ¼
**Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ:** multi-select Ñ chips

**UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ Ğ°Ğ¹Ğ¾Ğ½                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ°...              ]  â”‚
â”‚                                     â”‚
â”‚ Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾:                            â”‚
â”‚ [Ğ’Ğ°ÑĞ¸Ğ»ĞµĞ¾ÑÑ‚Ñ€Ğ¾Ğ²ÑĞºĞ¸Ğ¹ Ã—] [ĞŸĞµÑ‚Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ´ÑĞºĞ¸Ğ¹ Ã—] â”‚
â”‚                                     â”‚
â”‚ â–¼ ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ:                       â”‚
â”‚   â–¡ Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ (234)               â”‚
â”‚   â˜‘ Ğ’Ğ°ÑĞ¸Ğ»ĞµĞ¾ÑÑ‚Ñ€Ğ¾Ğ²ÑĞºĞ¸Ğ¹ (189)          â”‚
â”‚   â˜‘ ĞŸĞµÑ‚Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ´ÑĞºĞ¸Ğ¹ (156)             â”‚
â”‚   â–¡ ĞŸÑ€Ğ¸Ğ¼Ğ¾Ñ€ÑĞºĞ¸Ğ¹ (145)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ MultiSelect**

```tsx
interface MultiSelectProps {
  options: { name: string; count: number }[];
  selected: string[];
  onChange: (selected: string[]) => void;
  placeholder: string;
  searchable?: boolean;
}

function MultiSelect({ options, selected, onChange, placeholder, searchable = true }: MultiSelectProps) {
  const [search, setSearch] = useState('');
  const [isOpen, setIsOpen] = useState(false);

  const filteredOptions = options.filter(opt =>
    opt.name.toLowerCase().includes(search.toLowerCase())
  );

  const toggle = (name: string) => {
    if (selected.includes(name)) {
      onChange(selected.filter(s => s !== name));
    } else {
      onChange([...selected, name]);
    }
  };

  return (
    <div className="relative">
      {/* Selected chips */}
      <div className="flex flex-wrap gap-1 mb-2">
        {selected.map(name => (
          <span key={name} className="chip">
            {name}
            <button onClick={() => toggle(name)}>Ã—</button>
          </span>
        ))}
      </div>

      {/* Search input */}
      {searchable && (
        <input
          placeholder={placeholder}
          value={search}
          onChange={e => setSearch(e.target.value)}
          onFocus={() => setIsOpen(true)}
        />
      )}

      {/* Dropdown */}
      {isOpen && (
        <div className="absolute z-10 w-full bg-white border rounded-lg shadow-lg max-h-60 overflow-auto">
          {filteredOptions.map(opt => (
            <label key={opt.name} className="flex items-center p-2 hover:bg-gray-50 cursor-pointer">
              <input
                type="checkbox"
                checked={selected.includes(opt.name)}
                onChange={() => toggle(opt.name)}
              />
              <span className="ml-2">{opt.name}</span>
              <span className="ml-auto text-gray-400 text-sm">({opt.count})</span>
            </label>
          ))}
        </div>
      )}
    </div>
  );
}
```

**Filters.tsx - Ğ·Ğ°Ğ¼ĞµĞ½Ğ° select Ğ½Ğ° MultiSelect:**

```tsx
// Ğ‘Ñ‹Ğ»Ğ¾:
<select value={filters.districts?.[0] || ''} onChange={...}>

// Ğ¡Ñ‚Ğ°Ğ»Ğ¾:
<MultiSelect
  options={filterOptions.districts}
  selected={filters.districts || []}
  onChange={(districts) => applyFilters({ ...filters, districts })}
  placeholder="ĞŸĞ¾Ğ¸ÑĞº Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ°..."
/>
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| F3.1 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ MultiSelect | 4h | - |
| F3.2 | Frontend: ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ chips Ğ¸ dropdown | 2h | F3.1 |
| F3.3 | Frontend: Ğ·Ğ°Ğ¼ĞµĞ½Ğ° select Ğ½Ğ° MultiSelect Ğ´Ğ»Ñ Ñ€Ğ°Ğ¹Ğ¾Ğ½Ğ¾Ğ² | 1h | F3.2 |
| F3.4 | Frontend: Ğ·Ğ°Ğ¼ĞµĞ½Ğ° select Ğ½Ğ° MultiSelect Ğ´Ğ»Ñ Ğ¼ĞµÑ‚Ñ€Ğ¾ | 1h | F3.2 |
| F3.5 | Frontend: Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ URL params (Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹) | 1h | F3.4 |
| F3.6 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | F3.5 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~11 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 2.4 Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹

#### 2.4.1 Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ‚Ğ°Ğ¶Ñƒ

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ñ‚Ğ°Ğ¶                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¾Ñ‚ [___] Ğ´Ğ¾ [___]                   â”‚
â”‚                                     â”‚
â”‚ â˜‘ ĞĞµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹    â˜‘ ĞĞµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ `floor_min`, `floor_max`, `not_first_floor`, `not_last_floor` ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ½Ğ° backend, Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ UI.

#### 2.4.2 Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´Ğ¸ ĞºÑƒÑ…Ğ½Ğ¸

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ ĞºÑƒÑ…Ğ½Ğ¸, Ğ¼Â²                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¾Ñ‚ [___] Ğ´Ğ¾ [___]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Backend:** Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `kitchen_area_min`, `kitchen_area_max` Ğ² Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹.

#### 2.4.3 Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ²Ñ‹ÑĞ¾Ñ‚Ğµ Ğ¿Ğ¾Ñ‚Ğ¾Ğ»ĞºĞ¾Ğ²

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¿Ğ¾Ñ‚Ğ¾Ğ»ĞºĞ¾Ğ²                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Ğ¾Ñ‚ 2.7Ğ¼] [Ğ¾Ñ‚ 3Ğ¼] [Ğ¾Ñ‚ 3.5Ğ¼]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Backend:** Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `ceiling_height_min` Ğ² Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ (Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞµÑÑ‚ÑŒ Ğ² buildings).

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| F4.1 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ FloorFilter | 2h | - |
| F4.2 | Backend: kitchen_area_min/max Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ | 1h | - |
| F4.3 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ KitchenAreaFilter | 1h | F4.2 |
| F4.4 | Backend: ceiling_height_min Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ | 1h | - |
| F4.5 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ CeilingHeightFilter | 2h | F4.4 |
| F4.6 | Frontend: Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² | 2h | F4.1-F4.5 |
| F4.7 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | F4.6 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~11 Ñ‡Ğ°ÑĞ¾Ğ²**

---

## 3. Ğ¤Ğ°Ğ·Ğ° 2: Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ

### 3.1 ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¾Ğ²

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ², Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ½Ğ°Ğ¸Ğ±Ğ¾Ğ»ĞµĞµ ÑƒĞ´Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ´Ğ»Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸.

**Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹:**
1. **ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸** (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹) â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€
2. **Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°** â€” ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹
3. **ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸** â€” Ğ³Ğ°Ğ»ĞµÑ€ĞµÑ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº
4. **ĞšĞ°Ñ€Ñ‚Ğ°** â€” Ğ³ĞµĞ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ²Ğ¸Ğ´

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ Ğ² Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…                    ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾: 1,234    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â–¦ ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸] [â‰¡ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°] [âŠ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸] [â— ĞĞ° ĞºĞ°Ñ€Ñ‚Ğµ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Frontend: ViewModeSwitcher ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚**

```tsx
type ViewMode = 'cards' | 'table' | 'plans' | 'map';

interface ViewModeSwitcherProps {
  mode: ViewMode;
  onChange: (mode: ViewMode) => void;
}

function ViewModeSwitcher({ mode, onChange }: ViewModeSwitcherProps) {
  const modes = [
    { id: 'cards', icon: 'â–¦', label: 'ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸' },
    { id: 'table', icon: 'â‰¡', label: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°' },
    { id: 'plans', icon: 'âŠ', label: 'ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸' },
    { id: 'map', icon: 'â—', label: 'ĞĞ° ĞºĞ°Ñ€Ñ‚Ğµ' },
  ];

  return (
    <div className="flex border border-[var(--color-border)] rounded-lg overflow-hidden">
      {modes.map(m => (
        <button
          key={m.id}
          onClick={() => onChange(m.id as ViewMode)}
          className={`px-4 py-2 flex items-center gap-2 ${
            mode === m.id
              ? 'bg-[var(--color-text)] text-white'
              : 'hover:bg-gray-50'
          }`}
        >
          <span>{m.icon}</span>
          <span className="hidden sm:inline">{m.label}</span>
        </button>
      ))}
    </div>
  );
}
```

**URL Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€:** `?view=table`

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| V1.1 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ViewModeSwitcher | 2h | - |
| V1.2 | Frontend: ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ view mode Ğ² URL | 1h | V1.1 |
| V1.3 | Frontend: localStorage Ğ´Ğ»Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¹ | 1h | V1.1 |
| V1.4 | Frontend: Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ /offers Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ² | 2h | V1.2 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~6 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 3.2 Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ Ğ² Ğ²Ğ¸Ğ´Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹ Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ°Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¸ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ»ÑƒÑ‡ÑˆĞ¸Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹.

**UI (Ñ€ĞµÑ„ĞµÑ€ĞµĞ½Ñ TrendAgent):**
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #  â”‚ Ğ–Ğš        â”‚ Ğ Ğ°Ğ¹Ğ¾Ğ½   â”‚ ĞœĞµÑ‚Ñ€Ğ¾  â”‚ Ğ¢Ğ¸Ğ¿   â”‚ S Ğ¾Ğ±Ñ‰  â”‚ Ğ­Ñ‚Ğ°Ğ¶  â”‚ Ğ¦ĞµĞ½Ğ°    â”‚ â‚½/Ğ¼Â²   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ NEXT      â”‚ Ğ’.Ğ.    â”‚ Ğ“Ğ¾Ñ€Ğ½Ñ‹Ğ¹ â”‚ 2Ğº    â”‚ 66.3   â”‚ 5/10  â”‚ 15 Ğ¼Ğ»Ğ½  â”‚ 226K   â”‚
â”‚ 2  â”‚ Ğ¦Ğ¸Ğ²Ğ¸Ğ»Ğ¸Ğ·Ğ°..â”‚ ĞŸÑ€Ğ¸Ğ¼Ğ¾Ñ€..â”‚ Ğ‘ĞµĞ³Ğ¾Ğ²Ğ°Ñâ”‚ 1Ğº    â”‚ 38.2   â”‚ 12/25 â”‚ 8.5 Ğ¼Ğ»Ğ½ â”‚ 222K   â”‚
â”‚ 3  â”‚ ...       â”‚ ...     â”‚ ...    â”‚ ...   â”‚ ...    â”‚ ...   â”‚ ...     â”‚ ...    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              [â†‘ Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞºÑƒ Ğ½Ğ° Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº]
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
- Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞºÑƒ Ğ½Ğ° Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº (asc/desc)
- Ğ¤Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ¿Ñ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ
- Ğ’Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸
- ĞšĞ»Ğ¸Ğº Ğ½Ğ° ÑÑ‚Ñ€Ğ¾ĞºÑƒ â†’ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸
- Ğ§ĞµĞºĞ±Ğ¾ĞºÑÑ‹ Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ/Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºÑƒ)

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Frontend: OffersTable ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚**

```tsx
interface Column {
  key: string;
  label: string;
  sortable?: boolean;
  width?: string;
  render?: (offer: OfferListItem) => React.ReactNode;
}

const COLUMNS: Column[] = [
  { key: 'select', label: '', width: '40px', render: (o) => <Checkbox offerId={o.id} /> },
  { key: 'complex_name', label: 'Ğ–Ğš', sortable: true, width: '150px' },
  { key: 'district_name', label: 'Ğ Ğ°Ğ¹Ğ¾Ğ½', sortable: true, width: '120px' },
  { key: 'metro_station', label: 'ĞœĞµÑ‚Ñ€Ğ¾', sortable: false, width: '120px' },
  { key: 'rooms', label: 'Ğ¢Ğ¸Ğ¿', sortable: true, width: '70px',
    render: (o) => formatRooms(o.rooms, o.is_studio) },
  { key: 'area_total', label: 'S Ğ¾Ğ±Ñ‰', sortable: true, width: '80px',
    render: (o) => `${o.area_total} Ğ¼Â²` },
  { key: 'floor', label: 'Ğ­Ñ‚Ğ°Ğ¶', sortable: true, width: '70px',
    render: (o) => `${o.floor}/${o.floors_total}` },
  { key: 'price', label: 'Ğ¦ĞµĞ½Ğ°', sortable: true, width: '100px',
    render: (o) => formatPrice(o.price) },
  { key: 'price_per_sqm', label: 'â‚½/Ğ¼Â²', sortable: true, width: '90px',
    render: (o) => formatPrice(o.price_per_sqm) },
  { key: 'actions', label: '', width: '80px',
    render: (o) => <RowActions offer={o} /> },
];

function OffersTable({ offers, sortBy, sortOrder, onSort }) {
  return (
    <div className="overflow-x-auto">
      <table className="w-full border-collapse">
        <thead className="sticky top-0 bg-white z-10">
          <tr>
            {COLUMNS.map(col => (
              <th
                key={col.key}
                style={{ width: col.width }}
                className={`p-3 text-left text-sm font-medium border-b ${
                  col.sortable ? 'cursor-pointer hover:bg-gray-50' : ''
                }`}
                onClick={() => col.sortable && onSort(col.key)}
              >
                {col.label}
                {col.sortable && sortBy === col.key && (
                  <span className="ml-1">{sortOrder === 'asc' ? 'â†‘' : 'â†“'}</span>
                )}
              </th>
            ))}
          </tr>
        </thead>
        <tbody>
          {offers.map((offer, idx) => (
            <tr
              key={offer.id}
              className={`hover:bg-blue-50 cursor-pointer ${
                idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'
              }`}
              onClick={() => router.push(`/offers/${offer.id}`)}
            >
              {COLUMNS.map(col => (
                <td key={col.key} className="p-3 text-sm border-b">
                  {col.render ? col.render(offer) : offer[col.key]}
                </td>
              ))}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| V2.1 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ OffersTable | 4h | V1.4 |
| V2.2 | Frontend: ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ°Ğ¼ | 2h | V2.1 |
| V2.3 | Frontend: sticky header | 1h | V2.1 |
| V2.4 | Frontend: Ñ‡ĞµĞºĞ±Ğ¾ĞºÑÑ‹ Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ | 2h | V2.1 |
| V2.5 | Frontend: row actions (Ğ² ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ, Ğ² Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºÑƒ) | 2h | V2.4 |
| V2.6 | Frontend: responsive (Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¾Ğ»Ğ» Ğ½Ğ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ…) | 1h | V2.1 |
| V2.7 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | V2.6 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~14 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 3.3 Ğ ĞµĞ¶Ğ¸Ğ¼ "ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸"

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ Ğ² Ğ²Ğ¸Ğ´Ğµ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ³Ğ°Ğ»ĞµÑ€ĞµĞ¸, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¾Ñ†ĞµĞ½Ğ¸Ñ‚ÑŒ layout Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ.

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           â”‚  â”‚  â”‚  â”‚           â”‚  â”‚  â”‚  â”‚           â”‚  â”‚
â”‚  â”‚ [ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€.] â”‚  â”‚  â”‚ â”‚ [ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€.] â”‚  â”‚  â”‚  â”‚ [ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€.] â”‚  â”‚
â”‚  â”‚           â”‚  â”‚  â”‚  â”‚           â”‚  â”‚  â”‚  â”‚           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  2Ğº, 66.3 Ğ¼Â²    â”‚  â”‚  1Ğº, 38.2 Ğ¼Â²    â”‚  â”‚  Ğ¡Ñ‚ÑƒĞ´Ğ¸Ñ, 28 Ğ¼Â²  â”‚
â”‚  15 Ğ¼Ğ»Ğ½ â‚½       â”‚  â”‚  8.5 Ğ¼Ğ»Ğ½ â‚½      â”‚  â”‚  6.2 Ğ¼Ğ»Ğ½ â‚½      â”‚
â”‚  Ğ–Ğš NEXT        â”‚  â”‚  Ğ–Ğš Ğ¦Ğ¸Ğ²Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ â”‚  â”‚  Ğ–Ğš Ğ¡Ğ²ĞµÑ‚Ğ»Ñ‹Ğ¹ Ğ¼Ğ¸Ñ€ â”‚
â”‚  Ğ¡Ğ´Ğ°Ğ½           â”‚  â”‚  2025           â”‚  â”‚  2026           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞĞºÑ†ĞµĞ½Ñ‚ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ (Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€)
- ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸
- Hover Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¾Ğ¿. Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
- Lightbox Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºÑƒ

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ plan_image**

Ğ’ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ ÑÑ…ĞµĞ¼Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ `images` Ñ Ñ‚ĞµĞ³Ğ°Ğ¼Ğ¸. ĞÑƒĞ¶Ğ½Ğ¾:
1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³ `plan` Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº
2. Ğ˜Ğ»Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ `plan_image_url` Ğ² `offers`

```sql
-- Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ images
SELECT url FROM images
WHERE offer_id = $1 AND 'plan' = ANY(tags)
LIMIT 1;

-- Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ (Ğ¿Ñ€Ğ¾Ñ‰Ğµ)
ALTER TABLE offers ADD COLUMN plan_image_url VARCHAR(500);
```

**Frontend: PlanCard ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚**

```tsx
function PlanCard({ offer }: { offer: OfferListItem }) {
  const [showLightbox, setShowLightbox] = useState(false);

  // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ plan_image Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ
  const planImage = offer.plan_image_url || offer.image_url;

  return (
    <>
      <div className="card group cursor-pointer" onClick={() => setShowLightbox(true)}>
        {/* ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° */}
        <div className="aspect-square bg-gray-100 relative overflow-hidden">
          {planImage ? (
            <img
              src={planImage}
              alt="ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°"
              className="w-full h-full object-contain p-4"
            />
          ) : (
            <div className="w-full h-full flex items-center justify-center text-gray-400">
              ĞĞµÑ‚ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
            </div>
          )}

          {/* Hover overlay */}
          <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
            <span className="text-white text-lg">Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ</span>
          </div>
        </div>

        {/* Ğ˜Ğ½Ñ„Ğ¾ */}
        <div className="p-4">
          <div className="flex justify-between items-start mb-2">
            <span className="font-medium">
              {formatRooms(offer.rooms, offer.is_studio)}, {formatArea(offer.area_total)}
            </span>
            <span className="text-lg font-semibold">{formatPrice(offer.price)}</span>
          </div>
          <div className="text-sm text-gray-500">
            {offer.complex_name}
          </div>
        </div>
      </div>

      {/* Lightbox */}
      {showLightbox && (
        <Lightbox image={planImage} onClose={() => setShowLightbox(false)} />
      )}
    </>
  );
}
```

**Frontend: PlansGrid**

```tsx
function PlansGrid({ offers }: { offers: OfferListItem[] }) {
  return (
    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
      {offers.map(offer => (
        <PlanCard key={offer.id} offer={offer} />
      ))}
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| V3.1 | Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ plan_image_url Ğ² offers Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ tags | 2h | - |
| V3.2 | Backend: Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ plan_image Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚ API | 1h | V3.1 |
| V3.3 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ PlanCard | 3h | V3.2 |
| V3.4 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Lightbox | 2h | - |
| V3.5 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ PlansGrid | 1h | V3.3 |
| V3.6 | Frontend: Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² /offers | 1h | V3.5, V1.4 |
| V3.7 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | V3.6 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~12 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 3.4 Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ Ğ¿Ğ¾Ğ¸ÑĞºĞ°, Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ Ğ½Ğ° Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Ğ¾Ñ†ĞµĞ½Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ.

**UI (split view):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚                             â”‚
â”‚  [Filters]                          â”‚                             â”‚
â”‚                                     â”‚         [MAP]               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚                             â”‚
â”‚  â”‚Card 1â”‚ â”‚Card 2â”‚ â”‚Card 3â”‚        â”‚      â—‰  â—‰                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚   â—‰     â—‰  â—‰                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚      â—‰                      â”‚
â”‚  â”‚Card 4â”‚ â”‚Card 5â”‚ â”‚Card 6â”‚        â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚                             â”‚
â”‚                                     â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Split view: ÑĞ¿Ğ¸ÑĞ¾Ğº ÑĞ»ĞµĞ²Ğ°, ĞºĞ°Ñ€Ñ‚Ğ° ÑĞ¿Ñ€Ğ°Ğ²Ğ°
- Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¼Ğ°Ñ€ĞºĞµÑ€
- ĞšĞ»Ğ¸Ğº Ğ½Ğ° Ğ¼Ğ°Ñ€ĞºĞµÑ€ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ popup Ñ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ğ¹
- ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ (toggle)

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```tsx
function OffersWithMap({ offers, markers }) {
  const [hoveredId, setHoveredId] = useState<number | null>(null);
  const [showMap, setShowMap] = useState(true);

  return (
    <div className={`grid ${showMap ? 'lg:grid-cols-2' : ''} gap-6`}>
      {/* Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº */}
      <div>
        <div className="grid md:grid-cols-2 gap-4">
          {offers.map(offer => (
            <OfferCard
              key={offer.id}
              offer={offer}
              onMouseEnter={() => setHoveredId(offer.id)}
              onMouseLeave={() => setHoveredId(null)}
              highlighted={hoveredId === offer.id}
            />
          ))}
        </div>
      </div>

      {/* ĞšĞ°Ñ€Ñ‚Ğ° */}
      {showMap && (
        <div className="sticky top-24 h-[calc(100vh-120px)]">
          <MapView
            markers={markers}
            highlightedId={hoveredId}
            onMarkerClick={(id) => router.push(`/offers/${id}`)}
          />
        </div>
      )}
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| V4.1 | Frontend: Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ layout Ğ´Ğ»Ñ split view | 3h | V1.4 |
| V4.2 | Frontend: ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ hover Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ¸ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ | 2h | V4.1 |
| V4.3 | Frontend: toggle Ğ¿Ğ¾ĞºĞ°Ğ·Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹ | 1h | V4.1 |
| V4.4 | Frontend: sticky map Ğ¿Ñ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ | 1h | V4.1 |
| V4.5 | Frontend: popup Ğ½Ğ° Ğ¼Ğ°Ñ€ĞºĞµÑ€Ğµ Ñ Ğ¸Ğ½Ñ„Ğ¾ | 2h | V4.2 |
| V4.6 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | V4.5 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~11 Ñ‡Ğ°ÑĞ¾Ğ²**

---

## 4. Ğ¤Ğ°Ğ·Ğ° 3: ĞĞ³ĞµĞ½Ñ‚ÑĞºĞ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

### 4.1 PDF-Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ ÑĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ ĞºÑ€Ğ°ÑĞ¸Ğ²ÑƒÑ PDF-Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞµÑ‘ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ Ğ¿Ğ¾ email Ğ¸Ğ»Ğ¸ Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€Ñƒ.

**Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ PDF:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     [LOGO HOUSLER]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   2-ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°             â”‚
â”‚  â”‚                    â”‚   Ğ–Ğš "NEXT"                        â”‚
â”‚  â”‚   [ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°]     â”‚                                    â”‚
â”‚  â”‚                    â”‚   15 000 000 â‚½                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   226 303 â‚½/Ğ¼Â²                     â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğ¥ĞĞ ĞĞšĞ¢Ğ•Ğ Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ˜                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  ĞĞ±Ñ‰Ğ°Ñ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ:     66.3 Ğ¼Â²    â”‚  Ğ­Ñ‚Ğ°Ğ¶:        5 Ğ¸Ğ· 10    â”‚
â”‚  Ğ–Ğ¸Ğ»Ğ°Ñ Ğ¿Ğ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ:     42.1 Ğ¼Â²    â”‚  ĞÑ‚Ğ´ĞµĞ»ĞºĞ°:     ĞŸĞ¾Ğ´ ĞºĞ»ÑÑ‡   â”‚
â”‚  ĞšÑƒÑ…Ğ½Ñ:             12.5 Ğ¼Â²    â”‚  Ğ‘Ğ°Ğ»ĞºĞ¾Ğ½:      Ğ”Ğ°         â”‚
â”‚  ĞŸĞ¾Ñ‚Ğ¾Ğ»ĞºĞ¸:           2.7 Ğ¼      â”‚  Ğ¡Ğ°Ğ½ÑƒĞ·ĞµĞ»:     Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğ ĞĞ¡ĞŸĞĞ›ĞĞ–Ğ•ĞĞ˜Ğ•                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  ĞĞ´Ñ€ĞµÑ: Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ’.Ğ. Ğ¿Ñ€., Ğ´. 87                           â”‚
â”‚  Ğ Ğ°Ğ¹Ğ¾Ğ½: Ğ’Ğ°ÑĞ¸Ğ»ĞµĞ¾ÑÑ‚Ñ€Ğ¾Ğ²ÑĞºĞ¸Ğ¹                                   â”‚
â”‚  ĞœĞµÑ‚Ñ€Ğ¾: Ğ“Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ˜Ğ½ÑÑ‚Ğ¸Ñ‚ÑƒÑ‚ (15 Ğ¼Ğ¸Ğ½ Ğ¿ĞµÑˆĞºĞ¾Ğ¼)                   â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚          [ĞšĞ°Ñ€Ñ‚Ğ°]                   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğ ĞšĞĞœĞŸĞ›Ğ•ĞšĞ¡Ğ•                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº: City Solutions                                â”‚
â”‚  Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸: Ğ¡Ğ´Ğ°Ğ½                                          â”‚
â”‚  ĞšĞ»Ğ°ÑÑ: Ğ‘Ğ¸Ğ·Ğ½ĞµÑ                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°: Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² | +7 999 123-45-67           â”‚
â”‚                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  ĞŸÑ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ÑÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°: 30.11.2025 | housler.ru        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğµ (jsPDF + html2canvas)**

```tsx
import jsPDF from 'jspdf';
import html2canvas from 'html2canvas';

async function generateOfferPDF(offer: OfferDetail) {
  // Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ¼ ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¹ HTML-ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
  const template = document.getElementById('pdf-template');

  // ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ² canvas
  const canvas = await html2canvas(template, { scale: 2 });

  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ PDF
  const pdf = new jsPDF('p', 'mm', 'a4');
  const imgData = canvas.toDataURL('image/png');
  pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);

  // Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼
  pdf.save(`${offer.complex_name}_${offer.id}.pdf`);
}
```

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ (puppeteer) â€” Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ**

```typescript
// backend/src/services/pdf.service.ts
import puppeteer from 'puppeteer';

export async function generateOfferPDF(offerId: number): Promise<Buffer> {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();

  // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ¼
  await page.goto(`${FRONTEND_URL}/offers/${offerId}/print`, {
    waitUntil: 'networkidle0'
  });

  // Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ PDF
  const pdf = await page.pdf({
    format: 'A4',
    printBackground: true,
    margin: { top: '20mm', right: '20mm', bottom: '20mm', left: '20mm' }
  });

  await browser.close();
  return pdf;
}

// Endpoint
router.get('/offers/:id/pdf', async (req, res) => {
  const pdf = await generateOfferPDF(Number(req.params.id));
  res.setHeader('Content-Type', 'application/pdf');
  res.setHeader('Content-Disposition', `attachment; filename=offer_${req.params.id}.pdf`);
  res.send(pdf);
});
```

**Frontend: ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ¸**

```tsx
// /offers/[id]/print/page.tsx
export default function OfferPrintPage() {
  // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  // Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ¼ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ğ±ĞµĞ· Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

  return (
    <div className="print-template p-8">
      {/* Header Ñ Ğ»Ğ¾Ğ³Ğ¾ */}
      {/* ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ */}
      {/* Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ */}
      {/* ĞšĞ°Ñ€Ñ‚Ğ° */}
      {/* Ğ¤ÑƒÑ‚ĞµÑ€ */}
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| A1.1 | Frontend: ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° /offers/[id]/print Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ¼ | 4h | - |
| A1.2 | Frontend: ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ¸ (@media print) | 2h | A1.1 |
| A1.3 | Backend: ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° puppeteer | 1h | - |
| A1.4 | Backend: pdf.service.ts | 3h | A1.3 |
| A1.5 | Backend: endpoint GET /api/offers/:id/pdf | 1h | A1.4 |
| A1.6 | Frontend: ĞºĞ½Ğ¾Ğ¿ĞºĞ° "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ PDF" Ğ² ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞµ | 1h | A1.5 |
| A1.7 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | A1.6 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~14 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 4.2 ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ Ğ¿Ğ¾ email, WhatsApp Ğ¸Ğ»Ğ¸ Telegram.

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [ğŸ“§ Email]  [ğŸ’¬ WhatsApp]  [âœˆ TG] â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  Email ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°:                     â”‚
â”‚  [ivan@example.com              ]   â”‚
â”‚                                     â”‚
â”‚  Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ:                         â”‚
â”‚  [Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ! ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ Ğ²Ğ°Ğ¼     ]  â”‚
â”‚  [Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑÑ‚Ñƒ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñƒ...    ]  â”‚
â”‚                                     â”‚
â”‚  â˜‘ ĞŸÑ€Ğ¸ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ PDF-Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ      â”‚
â”‚                                     â”‚
â”‚  [        ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ        ]        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ¡ÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€Ñ‹ (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹)**

```tsx
function ShareButtons({ offer }: { offer: OfferDetail }) {
  const shareText = `${formatRooms(offer.rooms, offer.is_studio)} Ğ² Ğ–Ğš "${offer.complex_name}"\n${formatPrice(offer.price)}\n${window.location.href}`;

  const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
  const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(shareText)}`;

  return (
    <div className="flex gap-2">
      <a href={whatsappUrl} target="_blank" className="btn btn-secondary">
        WhatsApp
      </a>
      <a href={telegramUrl} target="_blank" className="btn btn-secondary">
        Telegram
      </a>
    </div>
  );
}
```

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Email Ñ‡ĞµÑ€ĞµĞ· backend**

```typescript
// backend/src/services/email.service.ts
import nodemailer from 'nodemailer';

export async function sendOfferToClient(
  offer: OfferDetail,
  clientEmail: string,
  message: string,
  attachPdf: boolean,
  agentId: number
) {
  const transporter = nodemailer.createTransport({
    host: process.env.SMTP_HOST,
    port: 587,
    auth: {
      user: process.env.SMTP_USER,
      pass: process.env.SMTP_PASS
    }
  });

  const attachments = [];
  if (attachPdf) {
    const pdf = await generateOfferPDF(offer.id);
    attachments.push({
      filename: `${offer.complex_name}_${offer.id}.pdf`,
      content: pdf
    });
  }

  await transporter.sendMail({
    from: process.env.EMAIL_FROM,
    to: clientEmail,
    subject: `ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° Ğ² Ğ–Ğš "${offer.complex_name}" â€” ${formatPrice(offer.price)}`,
    html: generateEmailTemplate(offer, message),
    attachments
  });

  // Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ
  await db.query(
    'INSERT INTO email_logs (agent_id, offer_id, client_email, sent_at) VALUES ($1, $2, $3, NOW())',
    [agentId, offer.id, clientEmail]
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| A2.1 | Frontend: Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ ShareModal | 3h | - |
| A2.2 | Frontend: ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° WhatsApp/Telegram | 1h | A2.1 |
| A2.3 | Backend: email.service.ts Ñ nodemailer | 3h | - |
| A2.4 | Backend: HTML-ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ğ¿Ğ¸ÑÑŒĞ¼Ğ° | 2h | A2.3 |
| A2.5 | Backend: endpoint POST /api/offers/:id/share | 2h | A2.3, A2.4 |
| A2.6 | Frontend: Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ email | 2h | A2.5 |
| A2.7 | Backend: Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° email_logs | 1h | A2.5 |
| A2.8 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | A2.7 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~16 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 4.3 ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ñ… Ğ²ÑĞµ ÑÑ€Ğ°Ğ·Ñƒ Ğ² Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºÑƒ Ğ¸Ğ»Ğ¸ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ.

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾: 5 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€                                            â”‚
â”‚                                                                 â”‚
â”‚ [Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºÑƒ â–¼]  [Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ]  [âœ• Ğ¡Ğ½ÑÑ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Frontend: SelectionContext Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ**

```tsx
interface BulkSelectionState {
  selectedIds: Set<number>;
  isSelecting: boolean;
}

function BulkActionsBar() {
  const { selectedIds, clearSelection } = useBulkSelection();
  const { addToCompare } = useCompare();
  const [showSelectionModal, setShowSelectionModal] = useState(false);

  if (selectedIds.size === 0) return null;

  return (
    <div className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4 z-50">
      <div className="container flex items-center justify-between">
        <span>Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾: {selectedIds.size} ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€</span>
        <div className="flex gap-3">
          <button
            onClick={() => setShowSelectionModal(true)}
            className="btn btn-primary"
          >
            Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºÑƒ
          </button>
          <button
            onClick={() => {
              selectedIds.forEach(id => addToCompare(id));
              clearSelection();
            }}
            className="btn btn-secondary"
          >
            Ğ’ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ
          </button>
          <button onClick={clearSelection} className="btn btn-ghost">
            Ğ¡Ğ½ÑÑ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€
          </button>
        </div>
      </div>
    </div>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| A3.1 | Frontend: BulkSelectionContext | 2h | - |
| A3.2 | Frontend: Ñ‡ĞµĞºĞ±Ğ¾ĞºÑÑ‹ Ğ² OfferCard | 1h | A3.1 |
| A3.3 | Frontend: BulkActionsBar ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | 2h | A3.1 |
| A3.4 | Backend: endpoint POST /api/selections/:id/items/bulk | 2h | - |
| A3.5 | Frontend: Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€ĞºĞ¸ | 2h | A3.4 |
| A3.6 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 2h | A3.5 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~11 Ñ‡Ğ°ÑĞ¾Ğ²**

---

### 4.4 Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€

#### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ:**
> ĞšĞ°Ğº Ñ€Ğ¸ÑĞ»Ñ‚Ğ¾Ñ€, Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ (Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ, Ğ±Ñ€Ğ¾Ğ½ÑŒ, Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ°), Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹.

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹:**
- `available` â€” Ğ’ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ (Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹)
- `reserved` â€” Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° (Ğ¶Ñ‘Ğ»Ñ‚Ñ‹Ğ¹)
- `sold` â€” ĞŸÑ€Ğ¾Ğ´Ğ°Ğ½Ğ° (ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹/ÑĞµÑ€Ñ‹Ğ¹)

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Ğ’ ĞŸĞ ĞĞ”ĞĞ–Ğ•]  â† badge Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹       â”‚
â”‚ [Ğ‘Ğ ĞĞĞ¬]      â† badge Ğ¶Ñ‘Ğ»Ñ‚Ñ‹Ğ¹        â”‚
â”‚ [ĞŸĞ ĞĞ”ĞĞĞ]    â† badge ÑĞµÑ€Ñ‹Ğ¹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Database:**

```sql
-- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ² ÑÑ…ĞµĞ¼Ğµ, Ğ½Ğ¾ Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ
ALTER TABLE offers ADD COLUMN IF NOT EXISTS status VARCHAR(20) DEFAULT 'available';
-- Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ: 'available', 'reserved', 'sold'

CREATE INDEX idx_offers_status ON offers(status);
```

**Backend: Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ**

```typescript
interface OfferFilters {
  // ... existing
  status?: ('available' | 'reserved' | 'sold')[];
  show_sold?: boolean; // Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ false)
}

// SQL
if (!filters.show_sold) {
  conditions.push("o.status != 'sold'");
}
if (filters.status?.length) {
  conditions.push(`o.status = ANY($${paramIndex++})`);
}
```

**Frontend: StatusBadge ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚**

```tsx
function StatusBadge({ status }: { status: string }) {
  const config = {
    available: { label: 'Ğ’ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ', className: 'bg-green-100 text-green-800' },
    reserved: { label: 'Ğ‘Ñ€Ğ¾Ğ½ÑŒ', className: 'bg-yellow-100 text-yellow-800' },
    sold: { label: 'ĞŸÑ€Ğ¾Ğ´Ğ°Ğ½Ğ°', className: 'bg-gray-100 text-gray-500' },
  };

  const { label, className } = config[status] || config.available;

  return (
    <span className={`px-2 py-0.5 rounded text-xs font-medium ${className}`}>
      {label}
    </span>
  );
}
```

#### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| A4.1 | Database: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ/Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ status | 1h | - |
| A4.2 | Backend: Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ status Ğ² offers.service | 2h | A4.1 |
| A4.3 | Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ status Ğ² /api/filters | 1h | A4.2 |
| A4.4 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ StatusBadge | 1h | - |
| A4.5 | Frontend: Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² OfferCard | 1h | A4.4 |
| A4.6 | Frontend: Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ Ğ² Filters.tsx | 2h | A4.3 |
| A4.7 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 1h | A4.6 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~9 Ñ‡Ğ°ÑĞ¾Ğ²**

---

## 5. Ğ¤Ğ°Ğ·Ğ° 4: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹

### 5.1 ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² (Ñ€ĞµÑ„ĞµÑ€ĞµĞ½Ñ TrendAgent)

#### ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ

| Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ | Backend Ğ³Ğ¾Ñ‚Ğ¾Ğ² | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞÑ†ĞµĞ½ĞºĞ° |
|--------|---------------|-----------|--------|
| Ğ”Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¾ (Ğ¼Ğ¸Ğ½) | âœ“ metro_time_max | P1 | 2h |
| Ğ Ğ°Ğ¹Ğ¾Ğ½ | âœ“ districts | P1 | done |
| ĞœĞµÑ‚Ñ€Ğ¾ | âœ“ metro_stations | P1 | done |
| Ğ’Ğ¸Ğ´ Ğ¸Ğ· Ğ¾ĞºĞ¾Ğ½ | âœ— | P3 | 4h |
| Ğ¡Ñ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ ÑĞ²ĞµÑ‚Ğ° | âœ— | P3 | 4h |

#### ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: Ğ”Ğ¾Ğ¼

| Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ | Backend Ğ³Ğ¾Ñ‚Ğ¾Ğ² | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞÑ†ĞµĞ½ĞºĞ° |
|--------|---------------|-----------|--------|
| Ğ¢Ğ¸Ğ¿ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ | âœ— | P2 | 3h |
| ĞšĞ»Ğ°ÑÑ (ÑĞºĞ¾Ğ½Ğ¾Ğ¼/ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚/Ğ±Ğ¸Ğ·Ğ½ĞµÑ/ÑĞ»Ğ¸Ñ‚) | âœ— | P2 | 3h |
| ĞœĞ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ» ÑÑ‚ĞµĞ½ | âœ“ building_type | P2 | 3h |
| Ğ­Ñ‚Ğ°Ğ¶ĞµĞ¹ Ğ² Ğ´Ğ¾Ğ¼Ğµ | âœ— | P3 | 2h |
| ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³ | âœ“ has_parking | P2 | 2h |
| Ğ›Ğ¸Ñ„Ñ‚ | âœ“ has_lift | P3 | 2h |

#### ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°

| Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ | Backend Ğ³Ğ¾Ñ‚Ğ¾Ğ² | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞÑ†ĞµĞ½ĞºĞ° |
|--------|---------------|-----------|--------|
| Ğ­Ñ‚Ğ°Ğ¶ | âœ“ floor_min/max | P1 | 3h |
| ĞĞµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹/Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ | âœ“ | P1 | 1h |
| ĞÑ‚Ğ´ĞµĞ»ĞºĞ° | âœ“ renovation | P1 | 3h |
| S ĞºÑƒÑ…Ğ½Ğ¸ | âœ— | P2 | 2h |
| Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¿Ğ¾Ñ‚Ğ¾Ğ»ĞºĞ¾Ğ² | âœ— | P2 | 3h |
| Ğ¢Ğ¸Ğ¿ Ğ±Ğ°Ğ»ĞºĞ¾Ğ½Ğ° | âœ“ balcony | P3 | 2h |
| Ğ¡Ğ°Ğ½ÑƒĞ·ĞµĞ» | âœ“ bathroom_unit | P3 | 2h |

#### ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: ĞĞ¿Ğ»Ğ°Ñ‚Ğ°

| Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ | Backend Ğ³Ğ¾Ñ‚Ğ¾Ğ² | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞÑ†ĞµĞ½ĞºĞ° |
|--------|---------------|-----------|--------|
| Ğ Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ° | âœ— | P3 | 6h |
| Ğ˜Ğ¿Ğ¾Ñ‚ĞµĞºĞ° | âœ— | P3 | 6h |
| Ğ­ÑĞºÑ€Ğ¾Ñƒ | âœ— | P3 | 2h |

### 5.2 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² Ğ² UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ–Ğš, Ğ°Ğ´Ñ€ĞµÑÑƒ, Ğ¼ĞµÑ‚Ñ€Ğ¾...]                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹:                                                â”‚
â”‚ [Ğ¡Ñ‚ÑƒĞ´Ğ¸Ñ] [1] [2] [3] [4+]   Ğ¦ĞµĞ½Ğ°: [Ğ¾Ñ‚    ] [Ğ´Ğ¾    ]  [ĞŸĞ¾Ğ¸ÑĞº]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ [â–¼ Ğ’ÑĞµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹]                                                â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ğ ĞĞ¡ĞŸĞĞ›ĞĞ–Ğ•ĞĞ˜Ğ•          â”‚ Ğ”ĞĞœ                                 â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚ â”‚
â”‚ â”‚ Ğ Ğ°Ğ¹Ğ¾Ğ½      [â–¼ Ğ›ÑĞ±Ğ¾Ğ¹]  â”‚ Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸  [Ğ¡Ğ´Ğ°Ğ½][2025][2026]     â”‚ â”‚
â”‚ â”‚ ĞœĞµÑ‚Ñ€Ğ¾      [â–¼ Ğ›ÑĞ±Ğ¾Ğµ]  â”‚ Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº  [â–¼ Ğ›ÑĞ±Ğ¾Ğ¹]              â”‚ â”‚
â”‚ â”‚ Ğ”Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¾   [â–¼ Ğ›ÑĞ±Ğ¾Ğµ]  â”‚ ĞšĞ»Ğ°ÑÑ       [â–¼ Ğ›ÑĞ±Ğ¾Ğ¹]              â”‚ â”‚
â”‚ â”‚                       â”‚ ĞœĞ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»    [â–¼ Ğ›ÑĞ±Ğ¾Ğ¹]              â”‚ â”‚
â”‚ â”‚                       â”‚ â˜ Ğ¡ Ğ¿Ğ°Ñ€ĞºĞ¸Ğ½Ğ³Ğ¾Ğ¼                      â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ĞšĞ’ĞĞ Ğ¢Ğ˜Ğ Ğ              â”‚ Ğ¦Ğ•ĞĞ                                â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚ â”‚
â”‚ â”‚ Ğ­Ñ‚Ğ°Ğ¶    [Ğ¾Ñ‚   ][Ğ´Ğ¾  ] â”‚ Ğ¦ĞµĞ½Ğ°     [Ğ¾Ñ‚      ][Ğ´Ğ¾      ]      â”‚ â”‚
â”‚ â”‚ â˜ ĞĞµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹           â”‚ Ğ¦ĞµĞ½Ğ°/Ğ¼Â²  [Ğ¾Ñ‚      ][Ğ´Ğ¾      ]      â”‚ â”‚
â”‚ â”‚ â˜ ĞĞµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹        â”‚                                    â”‚ â”‚
â”‚ â”‚ ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ [Ğ¾Ñ‚   ][Ğ´Ğ¾  ] â”‚                                    â”‚ â”‚
â”‚ â”‚ ĞšÑƒÑ…Ğ½Ñ   [Ğ¾Ñ‚   ][Ğ´Ğ¾  ] â”‚                                    â”‚ â”‚
â”‚ â”‚ ĞŸĞ¾Ñ‚Ğ¾Ğ»ĞºĞ¸ [â–¼ Ğ¾Ñ‚ 2.7Ğ¼ ]  â”‚                                    â”‚ â”‚
â”‚ â”‚ ĞÑ‚Ğ´ĞµĞ»ĞºĞ° [â–¼ Ğ›ÑĞ±Ğ°Ñ   ]  â”‚                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ [Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹]                      [ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ 1,234 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ AdvancedFilters

```tsx
function AdvancedFilters({ filters, onChange, options }) {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <div>
      {/* Quick filters - Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ½Ñ‹ */}
      <QuickFilters filters={filters} onChange={onChange} />

      {/* Toggle */}
      <button
        onClick={() => setIsExpanded(!isExpanded)}
        className="w-full py-3 text-center border-t"
      >
        {isExpanded ? 'â–² Ğ¡Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ' : 'â–¼ Ğ’ÑĞµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹'}
      </button>

      {/* Advanced panel */}
      {isExpanded && (
        <div className="grid md:grid-cols-2 gap-6 p-4 border-t">
          {/* Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ */}
          <section>
            <h3 className="font-medium mb-3">Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ</h3>
            <MultiSelect label="Ğ Ğ°Ğ¹Ğ¾Ğ½" ... />
            <MultiSelect label="ĞœĞµÑ‚Ñ€Ğ¾" ... />
            <Select label="Ğ”Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¾" options={['5 Ğ¼Ğ¸Ğ½', '10 Ğ¼Ğ¸Ğ½', '15 Ğ¼Ğ¸Ğ½', '20 Ğ¼Ğ¸Ğ½']} />
          </section>

          {/* Ğ”Ğ¾Ğ¼ */}
          <section>
            <h3 className="font-medium mb-3">Ğ”Ğ¾Ğ¼</h3>
            <ChipSelect label="Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸" ... />
            <MultiSelect label="Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº" ... />
            <Select label="ĞšĞ»Ğ°ÑÑ" ... />
            <Checkbox label="Ğ¡ Ğ¿Ğ°Ñ€ĞºĞ¸Ğ½Ğ³Ğ¾Ğ¼" ... />
          </section>

          {/* ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° */}
          <section>
            <h3 className="font-medium mb-3">ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°</h3>
            <RangeInput label="Ğ­Ñ‚Ğ°Ğ¶" ... />
            <div className="flex gap-4">
              <Checkbox label="ĞĞµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹" />
              <Checkbox label="ĞĞµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹" />
            </div>
            <RangeInput label="ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ" ... />
            <RangeInput label="ĞšÑƒÑ…Ğ½Ñ" ... />
            <Select label="ĞŸĞ¾Ñ‚Ğ¾Ğ»ĞºĞ¸" ... />
            <MultiSelect label="ĞÑ‚Ğ´ĞµĞ»ĞºĞ°" ... />
          </section>

          {/* Ğ¦ĞµĞ½Ğ° */}
          <section>
            <h3 className="font-medium mb-3">Ğ¦ĞµĞ½Ğ°</h3>
            <RangeInput label="Ğ¦ĞµĞ½Ğ°" ... />
            <RangeInput label="Ğ¦ĞµĞ½Ğ° Ğ·Ğ° Ğ¼Â²" ... />
          </section>
        </div>
      )}
    </div>
  );
}
```

---

## 6. Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### 6.1 ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ‚Ğ¸Ğ¿Ğ¾Ğ²

**frontend/src/types/index.ts:**

```typescript
// Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹
export interface OfferFilters {
  // Existing
  rooms?: number[];
  is_studio?: boolean;
  price_min?: number;
  price_max?: number;
  area_min?: number;
  area_max?: number;
  districts?: string[];
  metro_stations?: string[];
  has_finishing?: boolean;
  search?: string;
  complex_id?: number;

  // New - Phase 1
  built_years?: number[];
  completion_status?: 'completed' | 'this_year' | 'next_year' | 'future';
  developer_ids?: number[];

  // New - Phase 2
  floor_min?: number;
  floor_max?: number;
  not_first_floor?: boolean;
  not_last_floor?: boolean;

  // New - Phase 3
  kitchen_area_min?: number;
  kitchen_area_max?: number;
  ceiling_height_min?: number;
  building_type?: string[];
  has_parking?: boolean;

  // New - Phase 4
  status?: OfferStatus[];
  show_sold?: boolean;
  metro_time_max?: number;
  price_per_sqm_min?: number;
  price_per_sqm_max?: number;
}

export type OfferStatus = 'available' | 'reserved' | 'sold';

export type ViewMode = 'cards' | 'table' | 'plans' | 'map';

// Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ñ†Ğ¸Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
export interface FilterOptions {
  districts: FilterOption[];
  metro_stations: FilterOption[];
  complexes: FilterOption[];
  rooms: { value: number; count: number }[];
  price_range: { min: number; max: number };
  area_range: { min: number; max: number };

  // New
  developers: FilterOption[];
  completion_years: { year: number | null; label: string; count: number }[];
  building_types: FilterOption[];
  ceiling_heights: number[]; // [2.5, 2.7, 3.0, 3.5]
  renovations: FilterOption[];
}

interface FilterOption {
  name: string;
  count: number;
}

// Developer
export interface Developer {
  id: number;
  name: string;
  complexes_count: number;
  offers_count: number;
}
```

### 6.2 API endpoints (Ğ½Ğ¾Ğ²Ñ‹Ğµ)

```
GET  /api/developers                    # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ¾Ğ²
GET  /api/developers/search?q=...       # ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ¾Ğ²

GET  /api/offers/:id/pdf                # Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ PDF

POST /api/offers/:id/share              # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ° email
     Body: { email, message, attachPdf }

POST /api/selections/:id/items/bulk     # ĞœĞ°ÑÑĞ¾Ğ²Ğ¾Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
     Body: { offerIds: number[] }
```

### 6.3 ĞĞ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

```
frontend/src/components/
â”œâ”€â”€ filters/
â”‚   â”œâ”€â”€ MultiSelect.tsx           # ĞœÑƒĞ»ÑŒÑ‚Ğ¸-Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ chips
â”‚   â”œâ”€â”€ ChipSelect.tsx            # Chip-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°
â”‚   â”œâ”€â”€ RangeInput.tsx            # Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ¾Ñ‚-Ğ´Ğ¾
â”‚   â”œâ”€â”€ CompletionYearFilter.tsx  # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ ÑÑ€Ğ¾ĞºĞ° ÑĞ´Ğ°Ñ‡Ğ¸
â”‚   â”œâ”€â”€ DeveloperFilter.tsx       # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºĞ°
â”‚   â”œâ”€â”€ FloorFilter.tsx           # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ ÑÑ‚Ğ°Ğ¶Ğ°
â”‚   â”œâ”€â”€ AdvancedFilters.tsx       # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
â”‚   â””â”€â”€ QuickFilters.tsx          # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ ViewModeSwitcher.tsx      # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ²
â”‚   â”œâ”€â”€ OffersTable.tsx           # Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´
â”‚   â”œâ”€â”€ PlansGrid.tsx             # Ğ’Ğ¸Ğ´ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº
â”‚   â”œâ”€â”€ PlanCard.tsx              # ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
â”‚   â””â”€â”€ OffersWithMap.tsx         # Split view Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ ShareModal.tsx            # ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸
â”‚   â”œâ”€â”€ BulkActionsBar.tsx        # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
â”‚   â””â”€â”€ StatusBadge.tsx           # Ğ‘ĞµĞ¹Ğ´Ğ¶ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
â”œâ”€â”€ pdf/
â”‚   â””â”€â”€ OfferPrintTemplate.tsx    # Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ğ´Ğ»Ñ PDF
â””â”€â”€ common/
    â””â”€â”€ Lightbox.tsx              # ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
```

### 6.4 ĞĞ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ñ‹

```tsx
// frontend/src/contexts/BulkSelectionContext.tsx
interface BulkSelectionContextType {
  selectedIds: Set<number>;
  isSelecting: boolean;
  toggleSelection: (id: number) => void;
  selectAll: (ids: number[]) => void;
  clearSelection: () => void;
}

// frontend/src/contexts/ViewModeContext.tsx
interface ViewModeContextType {
  mode: ViewMode;
  setMode: (mode: ViewMode) => void;
}
```

---

## 7. ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ¾Ğ°Ğ´Ğ¼Ğ°Ğ¿

### 7.1 Ğ¡Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ·Ğ°Ğ´Ğ°Ñ‡

| Ğ¤Ğ°Ğ·Ğ° | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|------|--------|--------|-----------|-------------|
| **1** | Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ€Ğ¾ĞºÑƒ ÑĞ´Ğ°Ñ‡Ğ¸ | 14h | P1 | - |
| **1** | Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºÑƒ | 14h | P1 | - |
| **1** | ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ² Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ… | 11h | P1 | - |
| **1** | Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ (ÑÑ‚Ğ°Ğ¶, ĞºÑƒÑ…Ğ½Ñ, Ğ¿Ğ¾Ñ‚Ğ¾Ğ»ĞºĞ¸) | 11h | P2 | - |
| **2** | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¾Ğ² | 6h | P1 | - |
| **2** | Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ | 14h | P1 | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ |
| **2** | Ğ ĞµĞ¶Ğ¸Ğ¼ "ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸" | 12h | P2 | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ |
| **2** | Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° (split view) | 11h | P2 | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ |
| **3** | PDF-Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ | 14h | P2 | - |
| **3** | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ | 16h | P2 | PDF (Ğ¾Ğ¿Ñ†.) |
| **3** | ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ | 11h | P2 | - |
| **3** | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ | 9h | P1 | - |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~143 Ñ‡Ğ°ÑĞ°** (~18 Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ´Ğ½ĞµĞ¹ Ğ¿Ñ€Ğ¸ 8Ñ‡/Ğ´ĞµĞ½ÑŒ)

### 7.2 Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

#### Sprint 1 (1.5 Ğ½ĞµĞ´ĞµĞ»Ğ¸) â€” Core Filters
1. âœ“ ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ² Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ… (11h)
2. âœ“ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ÑÑ€Ğ¾ĞºÑƒ ÑĞ´Ğ°Ñ‡Ğ¸ (14h)
3. âœ“ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ·Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸ĞºÑƒ (14h)
4. âœ“ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ (9h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 1: ~48h**

#### Sprint 2 (1 Ğ½ĞµĞ´ĞµĞ»Ñ) â€” View Modes
1. âœ“ ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¾Ğ² (6h)
2. âœ“ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ (14h)
3. âœ“ Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ (11h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 2: ~31h**

#### Sprint 3 (1 Ğ½ĞµĞ´ĞµĞ»Ñ) â€” Visual Modes
1. âœ“ Ğ ĞµĞ¶Ğ¸Ğ¼ "ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸" (12h)
2. âœ“ Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° (11h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 3: ~23h**

#### Sprint 4 (1 Ğ½ĞµĞ´ĞµĞ»Ñ) â€” Agent Tools
1. âœ“ PDF-Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ (14h)
2. âœ“ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ (16h)
3. âœ“ ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (11h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 4: ~41h**

### 7.3 ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ | Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ |
|---------|---------|---------|
| Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€Ğ° ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ | ? | -30% |
| ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ñ Ğ² Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | ? | +20% |
| Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² | ? | 80% ÑĞµÑÑĞ¸Ğ¹ |
| Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ PDF/Share | 0 | 50+ Ğ² Ğ´ĞµĞ½ÑŒ |
| NPS Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² | ? | > 8.0 |

---

## ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### A. Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

```sql
-- offers (Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ)
ALTER TABLE offers ADD COLUMN IF NOT EXISTS status VARCHAR(20) DEFAULT 'available';
ALTER TABLE offers ADD COLUMN IF NOT EXISTS plan_image_url VARCHAR(500);

-- email_logs (Ğ½Ğ¾Ğ²Ğ°Ñ)
CREATE TABLE email_logs (
  id SERIAL PRIMARY KEY,
  agent_id INTEGER REFERENCES users(id),
  offer_id BIGINT REFERENCES offers(id),
  client_email VARCHAR(255) NOT NULL,
  sent_at TIMESTAMP DEFAULT NOW()
);

-- pdf_downloads (Ğ½Ğ¾Ğ²Ğ°Ñ, Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸)
CREATE TABLE pdf_downloads (
  id SERIAL PRIMARY KEY,
  offer_id BIGINT REFERENCES offers(id),
  user_id INTEGER REFERENCES users(id),
  downloaded_at TIMESTAMP DEFAULT NOW()
);
```

### B. ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ğ½Ğ¾Ğ²Ñ‹Ğµ)

```env
# Email
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@housler.ru
SMTP_PASS=secret
EMAIL_FROM=Housler <noreply@housler.ru>

# PDF generation
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium
FRONTEND_URL=https://housler.ru
```

### C. Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (Ğ½Ğ¾Ğ²Ñ‹Ğµ)

**Backend:**
```json
{
  "puppeteer": "^21.0.0",
  "nodemailer": "^6.9.0"
}
```

**Frontend:**
```json
{
  // ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, ĞµÑĞ»Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğµ
  "jspdf": "^2.5.0",
  "html2canvas": "^1.4.0"
}
```

---

## 8. Ğ¤Ğ°Ğ·Ğ° 5: Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ–Ğš (Complex Detail Page)

### 8.1 ĞĞ±Ğ·Ğ¾Ñ€ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ vs Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ³Ğ¾

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° /complexes/[id]:**
- ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ header Ñ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (4 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)
- ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ (Ñ‚ĞµĞºÑÑ‚)
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)

**Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° (Ñ€ĞµÑ„ĞµÑ€ĞµĞ½Ñ TrendAgent):**
- Hero-ÑĞµĞºÑ†Ğ¸Ñ Ñ Ğ³Ğ°Ğ»ĞµÑ€ĞµĞµĞ¹ Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ñ‚Ğ°Ğ±Ğ°Ğ¼Ğ¸
- Sticky sidebar Ñ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼Ğ¸ Ğ¸ CTA
- Ğ¯ĞºĞ¾Ñ€Ğ½Ğ°Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ÑĞµĞºÑ†Ğ¸ÑĞ¼
- Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°
- ĞšĞ°Ñ€Ñ‚Ğ° Ñ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹
- Ğ¡ĞµĞºÑ†Ğ¸Ğ¸: ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹, ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³, ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ñ, ĞÑ‚Ğ´ĞµĞ»ĞºĞ°, ĞĞºÑ†Ğ¸Ğ¸, Ğ Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ°

---

### 8.2 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              HEADER (sticky)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ H1: ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ–Ğš                                                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹] [ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³] [ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ñ] [ĞšĞ°Ñ€Ñ‚Ğ°] [ĞŸĞ»Ğ°Ğ½] [ĞĞ± Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğµ]    â”‚  â”‚
â”‚  â”‚ [ĞÑ‚Ğ´ĞµĞ»ĞºĞ°] [ĞÑÑ€Ğ¾Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ°] [Ğ¥Ğ¾Ğ´ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ°] [Ğ¤Ğ°Ğ¹Ğ»Ñ‹] [ĞĞºÑ†Ğ¸Ğ¸]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                  â”‚  â”‚ SIDEBAR (sticky)          â”‚  â”‚
â”‚  â”‚         GALLERY                  â”‚  â”‚                           â”‚  â”‚
â”‚  â”‚    [Main Image]                  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚    [Thumbnails...]               â”‚  â”‚ â”‚ ĞĞºÑ†Ğ¸Ğ¸ Ğ¸ ÑĞºĞ¸Ğ´ĞºĞ¸        â”‚ â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚ â”‚ 1 Ğ°ĞºÑ†Ğ¸Ñ, 1 ÑÑƒĞ¿ĞµÑ€Ğ°ĞºÑ†Ğ¸Ñ â”‚ â”‚  â”‚
â”‚  â”‚  ĞĞ´Ñ€ĞµÑ: ÑƒĞ». ĞĞ¸Ğ¶Ğ½ÑÑ, Ğ¿. Ğ‘ÑƒĞ³Ñ€Ñ‹    â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  ĞœĞµÑ‚Ñ€Ğ¾: Ğ”ĞµĞ²ÑÑ‚ĞºĞ¸Ğ½Ğ¾, 10 Ğ¼Ğ¸Ğ½       â”‚  â”‚                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚                                        â”‚ â”‚ Ğ˜Ğ¿Ğ¾Ñ‚ĞµĞºĞ° Ğ² Ğ–Ğš          â”‚ â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ ĞĞµÑ‚ Ğ¸Ğ¿Ğ¾Ñ‚ĞµÑ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼â”‚ â”‚  â”‚
â”‚  â”‚ #apartments ĞšĞ’ĞĞ Ğ¢Ğ˜Ğ Ğ«             â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚                           â”‚  â”‚
â”‚  â”‚ [ĞŸĞ¾Ğ¸ÑĞº] [Ğ¢Ğ¸Ğ¿] [Ğ¦ĞµĞ½Ğ°] [Ğ’ÑĞµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€]â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚ â”‚ 3 Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ â€¢ ĞšĞ¾Ñ€Ğ¿ÑƒÑ 2  â”‚ â”‚  â”‚
â”‚  â”‚ [Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°] [ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸] [Ğ¨Ğ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ°]â”‚  â”‚ â”‚ Ğ¡Ğ´Ğ°Ğ½                  â”‚ â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ â”‚ Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº  ĞĞĞ Ğ¦ĞµÑ€Ñ‚ÑƒÑâ”‚ â”‚  â”‚
â”‚  â”‚ â”‚ ĞšĞ¾Ñ€Ğ¿ÑƒÑ 2 â€¢ Ğ¡Ğ´Ğ°Ğ½ â€¢ 34 ĞºĞ²   â”‚   â”‚  â”‚ â”‚ ĞšĞ»Ğ°ÑÑ       Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚  â”‚ â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚  â”‚ â”‚ Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ¿Ñ€Ğ¾Ğ´. ĞĞ¿Ñ€ 2022  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ Ğ¡Ñ‚ÑƒĞ´Ğ¸Ğ¸  24Ğ¼Â²   Ğ¾Ñ‚ 3 Ğ¼Ğ»Ğ½   â”‚   â”‚  â”‚ â”‚ ĞšĞ»ÑÑ‡Ğ¸       Ğ—Ğ°ÑĞµĞ»ĞµĞ½   â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ 1Ğº      37Ğ¼Â²   Ğ¾Ñ‚ 4.3 Ğ¼Ğ»Ğ½ â”‚   â”‚  â”‚ â”‚ Ğ¢Ğ¸Ğ¿ Ğ´Ğ¾Ğ¼Ğ°    ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚   â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ â”‚ ĞÑ‚Ğ´ĞµĞ»ĞºĞ°     Ğ‘ĞµĞ· Ğ¾Ñ‚Ğ´.  â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³     ĞŸĞ¾Ğ´Ğ·ĞµĞ¼Ğ½Ñ‹Ğ¹ â”‚ â”‚  â”‚
â”‚                                        â”‚ â”‚ ĞĞ¿Ğ»Ğ°Ñ‚Ğ°      100%, Ğ˜Ğ¿. â”‚ â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ Ğ”Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€     ĞšĞŸ        â”‚ â”‚  â”‚
â”‚  â”‚ #location ĞĞ ĞšĞĞ Ğ¢Ğ•               â”‚  â”‚ â”‚ Ğ­ÑĞºÑ€Ğ¾Ñƒ      ĞĞµÑ‚       â”‚ â”‚  â”‚
â”‚  â”‚ [Yandex Map with infrastructure] â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                           â”‚  â”‚
â”‚                                        â”‚ [ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹]                â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ [Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ]           â”‚  â”‚
â”‚  â”‚ #plan ĞŸĞ›ĞĞ ĞšĞĞœĞŸĞ›Ğ•ĞšĞ¡Ğ             â”‚  â”‚                           â”‚  â”‚
â”‚  â”‚ [Interactive 3D visualization]   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚ #description ĞĞ‘ ĞĞ‘ĞªĞ•ĞšĞ¢Ğ•          â”‚                                 â”‚
â”‚  â”‚ [Features grid 2x3]              â”‚                                 â”‚
â”‚  â”‚ [Description text]               â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚ #finishing ĞĞ¢Ğ”Ğ•Ğ›ĞšĞ               â”‚                                 â”‚
â”‚  â”‚ [Finishing options cards]        â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 8.3 ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ–Ğš

#### 8.3.1 ComplexHero â€” Ğ“Ğ°Ğ»ĞµÑ€ĞµÑ Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ

**Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
> ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑÑ€Ğ°Ğ·Ñƒ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ–Ğš, Ğ°Ğ´Ñ€ĞµÑ, Ğ¼ĞµÑ‚Ñ€Ğ¾ Ğ¸ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ ÑĞµĞºÑ†Ğ¸ÑĞ¼ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹.

**UI ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:**

```tsx
interface ComplexHeroProps {
  complex: ComplexDetail;
  images: string[];
  activeTab: string;
  onTabChange: (tab: string) => void;
}

// Ğ¢Ğ°Ğ±Ñ‹ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
const NAVIGATION_TABS = [
  { id: 'apartments', label: 'ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹', anchor: '#apartments' },
  { id: 'parking', label: 'ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³', anchor: '#parking', disabled: true }, // ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ¿Ğ°Ñ€ĞºĞ¸Ğ½Ğ³Ğ°
  { id: 'commerce', label: 'ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ñ', anchor: '#commerce', disabled: true },
  { id: 'location', label: 'ĞšĞ°Ñ€Ñ‚Ğ°', anchor: '#location' },
  { id: 'plan', label: 'ĞŸĞ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°', anchor: '#plan' },
  { id: 'description', label: 'ĞĞ± Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğµ', anchor: '#description' },
  { id: 'finishing', label: 'ĞÑ‚Ğ´ĞµĞ»ĞºĞ°', anchor: '#finishing' },
  { id: 'panorama', label: 'ĞÑÑ€Ğ¾Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ğ°', anchor: '#panorama' },
  { id: 'progress', label: 'Ğ¥Ğ¾Ğ´ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ°', anchor: '#progress' },
  { id: 'files', label: 'Ğ¤Ğ°Ğ¹Ğ»Ñ‹', anchor: '#files' },
  { id: 'promotions', label: 'ĞĞºÑ†Ğ¸Ğ¸', anchor: '#promotions' },
  { id: 'installment', label: 'Ğ Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ°', anchor: '#installment' },
];
```

**Ğ¡Ñ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**

```css
.complex-hero {
  margin-bottom: 32px;
}

.complex-title {
  font-size: 32px;
  font-weight: 700;
  color: #1a1a1a;
  margin-bottom: 16px;
}

.navigation-tabs {
  display: flex;
  gap: 24px;
  border-bottom: 1px solid #e5e5e5;
  overflow-x: auto;
  scrollbar-width: none;
}

.nav-tab {
  padding: 12px 0;
  color: #666;
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.nav-tab:hover {
  color: #1a1a1a;
}

.nav-tab.active {
  color: #1a1a1a;
  border-bottom-color: #2563eb;
}

.nav-tab.disabled {
  color: #999;
  cursor: not-allowed;
}
```

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**

```tsx
function ComplexHero({ complex, images, activeTab, onTabChange }: ComplexHeroProps) {
  const [activeImage, setActiveImage] = useState(0);
  const [showFullscreen, setShowFullscreen] = useState(false);

  return (
    <section className="complex-hero">
      {/* Title */}
      <h1 className="complex-title">{complex.name}</h1>

      {/* Navigation Tabs */}
      <nav className="navigation-tabs">
        {NAVIGATION_TABS.map(tab => (
          <a
            key={tab.id}
            href={tab.anchor}
            className={cn('nav-tab', {
              'active': activeTab === tab.id,
              'disabled': tab.disabled
            })}
            onClick={(e) => {
              if (tab.disabled) {
                e.preventDefault();
                return;
              }
              onTabChange(tab.id);
            }}
          >
            {tab.label}
            {tab.disabled && ' Ğ½ĞµÑ‚'}
          </a>
        ))}
      </nav>

      {/* Gallery */}
      <div className="grid lg:grid-cols-[1fr_400px] gap-8 mt-6">
        <div>
          {/* Main Image */}
          <div className="relative aspect-[16/10] rounded-lg overflow-hidden bg-gray-100">
            {images.length > 0 ? (
              <>
                <img
                  src={images[activeImage]}
                  alt={complex.name}
                  className="w-full h-full object-cover"
                />
                {/* Navigation arrows */}
                <button
                  className="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center hover:bg-white"
                  onClick={() => setActiveImage(i => (i - 1 + images.length) % images.length)}
                >
                  â†
                </button>
                <button
                  className="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center hover:bg-white"
                  onClick={() => setActiveImage(i => (i + 1) % images.length)}
                >
                  â†’
                </button>
                {/* Fullscreen button */}
                <button
                  className="absolute top-4 right-4 w-10 h-10 bg-white/80 rounded-lg flex items-center justify-center hover:bg-white"
                  onClick={() => setShowFullscreen(true)}
                >
                  â›¶
                </button>
              </>
            ) : (
              <div className="w-full h-full flex items-center justify-center text-gray-400">
                ĞĞµÑ‚ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
              </div>
            )}
          </div>

          {/* Thumbnails */}
          {images.length > 1 && (
            <div className="flex gap-2 mt-4 overflow-x-auto pb-2">
              {images.map((img, idx) => (
                <button
                  key={idx}
                  onClick={() => setActiveImage(idx)}
                  className={cn(
                    'flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2',
                    idx === activeImage ? 'border-blue-600' : 'border-transparent'
                  )}
                >
                  <img src={img} alt="" className="w-full h-full object-cover" />
                </button>
              ))}
            </div>
          )}

          {/* Plan button */}
          <a href="#plan" className="inline-flex items-center gap-2 mt-4 px-4 py-2 border rounded-lg hover:bg-gray-50">
            <MapIcon className="w-5 h-5" />
            ĞŸĞ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°
          </a>

          {/* Address & Metro */}
          <div className="mt-6 space-y-2">
            <div className="text-lg">
              {complex.address}
            </div>
            {complex.metro_station && (
              <div className="flex items-center gap-2 text-gray-600">
                <span className="w-3 h-3 rounded-full bg-red-500"></span>
                {complex.metro_station}, {complex.metro_distance} Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼
              </div>
            )}
          </div>
        </div>

        {/* Sidebar placeholder - rendered separately */}
      </div>

      {/* Fullscreen modal */}
      {showFullscreen && (
        <Lightbox
          images={images}
          initialIndex={activeImage}
          onClose={() => setShowFullscreen(false)}
        />
      )}
    </section>
  );
}
```

---

#### 8.3.2 ComplexSidebar â€” Sticky Ğ±Ğ¾ĞºĞ¾Ğ²Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ

**Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
> ĞĞ³ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ–Ğš Ğ¸ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ°Ğ¼/Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹.

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**

```typescript
interface ComplexCharacteristics {
  // ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
  phase: string;           // "3 Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ"
  building: string;        // "ĞšĞ¾Ñ€Ğ¿ÑƒÑ 2"
  status: string;          // "Ğ¡Ğ´Ğ°Ğ½" | "Ğ¡Ñ‚Ñ€Ğ¾Ğ¸Ñ‚ÑÑ"

  // Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
  developer: string;       // "ĞĞĞ Ğ¦ĞµÑ€Ñ‚ÑƒÑ"
  property_class: string;  // "Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚" | "ĞšĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚" | "Ğ‘Ğ¸Ğ·Ğ½ĞµÑ" | "Ğ­Ğ»Ğ¸Ñ‚"
  sales_start: string;     // "ĞĞ¿Ñ€ĞµĞ»ÑŒ 2022 - ĞºĞ¾Ñ€Ğ¿ÑƒÑ 2"
  keys_date: string;       // "Ğ—Ğ°ÑĞµĞ»ĞµĞ½" | "1 ĞºĞ². 2025"
  building_type: string;   // "Ğ“Ğ°Ğ·Ğ¾Ğ±ĞµÑ‚Ğ¾Ğ½-Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚" | "ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğ¹" | "ĞŸĞ°Ğ½ĞµĞ»ÑŒĞ½Ñ‹Ğ¹"
  facade: string;          // "Ğ¨Ñ‚ÑƒĞºĞ°Ñ‚ÑƒÑ€ĞºĞ°" | "Ğ’ĞµĞ½Ñ‚Ğ¸Ğ»Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ Ñ„Ğ°ÑĞ°Ğ´"
  finishing: string;       // "Ğ‘ĞµĞ· Ğ¾Ñ‚Ğ´ĞµĞ»ĞºĞ¸" | "Ğ§Ğ¸ÑÑ‚Ğ¾Ğ²Ğ°Ñ" | "ĞŸĞ¾Ğ´ ĞºĞ»ÑÑ‡"
  parking: string;         // "Ğ¡Ñ‚Ğ¾ÑĞ½ĞºĞ°, ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ĞºĞ¸Ğ½Ğ³"
  lift: string;            // "ĞŸĞ°ÑÑĞ°Ğ¶Ğ¸Ñ€ÑĞºĞ¸Ğ¹ Ğ¸ Ğ³Ñ€ÑƒĞ·Ğ¾Ğ²Ğ¾Ğ¹"
  payment: string;         // "100% Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ğ˜Ğ¿Ğ¾Ñ‚ĞµĞºĞ°"
  contract: string;        // "ĞšĞŸ" | "Ğ”Ğ”Ğ£" | "Ğ–Ğ¡Ğš"
  escrow: boolean;         // true | false

  // ĞĞºÑ†Ğ¸Ğ¸
  promotions_count: number;
  super_promotions_count: number;

  // Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  has_mortgage: boolean;
  has_installment: boolean;
}
```

**UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**

```tsx
function ComplexSidebar({ complex, characteristics }: { complex: ComplexDetail; characteristics: ComplexCharacteristics }) {
  return (
    <aside className="lg:sticky lg:top-24 space-y-6">
      {/* ĞĞºÑ†Ğ¸Ğ¸ */}
      <div className="bg-white border rounded-lg p-5">
        <h3 className="font-semibold mb-2">ĞĞºÑ†Ğ¸Ğ¸ Ğ¸ ÑĞºĞ¸Ğ´ĞºĞ¸ Ğ² Ğ–Ğš</h3>
        <p className="text-sm text-gray-500 mb-3">
          {characteristics.promotions_count} Ğ°ĞºÑ†Ğ¸Ñ, {characteristics.super_promotions_count} ÑÑƒĞ¿ĞµÑ€Ğ°ĞºÑ†Ğ¸Ñ
        </p>
        <a href="#promotions" className="btn btn-secondary btn-sm w-full">
          Ğ’ÑĞµ
        </a>
      </div>

      {/* Ğ˜Ğ¿Ğ¾Ñ‚ĞµĞºĞ° */}
      <div className="bg-white border rounded-lg p-5">
        <h3 className="font-semibold mb-2">Ğ˜Ğ¿Ğ¾Ñ‚ĞµĞºĞ° Ğ² Ğ–Ğš</h3>
        <p className="text-sm text-gray-500">
          {characteristics.has_mortgage ? 'Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¸Ğ¿Ğ¾Ñ‚ĞµĞºĞ°' : 'ĞĞµÑ‚ Ğ¸Ğ¿Ğ¾Ñ‚ĞµÑ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼'}
        </p>
      </div>

      {/* Ğ Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ° */}
      <div className="bg-white border rounded-lg p-5">
        <h3 className="font-semibold mb-2">Ğ Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ° Ğ² Ğ–Ğš</h3>
        <p className="text-sm text-gray-500">
          {characteristics.has_installment ? 'Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ€Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ°' : 'Ğ’ Ğ–Ğš Ğ½ĞµÑ‚ Ñ€Ğ°ÑÑÑ€Ğ¾Ñ‡ĞºĞ¸'}
        </p>
      </div>

      {/* Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ */}
      <div className="bg-white border rounded-lg overflow-hidden">
        {/* Header badge */}
        <div className="bg-amber-50 px-5 py-3 border-b">
          <span className="text-sm font-medium">
            {characteristics.phase} â€¢ {characteristics.building} â€¢ {characteristics.status}
          </span>
        </div>

        {/* Characteristics table */}
        <div className="divide-y">
          <CharacteristicRow label="Ğ—Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‰Ğ¸Ğº" value={characteristics.developer} />
          <CharacteristicRow label="ĞšĞ»Ğ°ÑÑ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸" value={characteristics.property_class} />
          <CharacteristicRow label="Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶" value={characteristics.sales_start} />
          <CharacteristicRow label="Ğ¡Ñ€Ğ¾Ğº Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ ĞºĞ»ÑÑ‡ĞµĞ¹" value={characteristics.keys_date} />
          <CharacteristicRow label="Ğ¢Ğ¸Ğ¿ Ğ´Ğ¾Ğ¼Ğ°" value={characteristics.building_type} />
          <CharacteristicRow label="Ğ¤Ğ°ÑĞ°Ğ´" value={characteristics.facade} />
          <CharacteristicRow label="ĞÑ‚Ğ´ĞµĞ»ĞºĞ°" value={characteristics.finishing} />
          <CharacteristicRow label="ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³" value={characteristics.parking} />
          <CharacteristicRow label="Ğ›Ğ¸Ñ„Ñ‚" value={characteristics.lift} />
          <CharacteristicRow label="ĞĞ¿Ğ»Ğ°Ñ‚Ğ°" value={characteristics.payment} />
          <CharacteristicRow label="Ğ”Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€" value={characteristics.contract} />
          <CharacteristicRow label="Ğ­ÑĞºÑ€Ğ¾Ñƒ" value={characteristics.escrow ? 'Ğ”Ğ°' : 'ĞĞµÑ‚'} />
        </div>

        {/* Actions */}
        <div className="p-5 space-y-3">
          <button className="btn btn-secondary w-full flex items-center justify-center gap-2">
            <PhoneIcon className="w-4 h-4" />
            ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹
          </button>
          <button className="btn btn-primary w-full">
            Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
          </button>
        </div>
      </div>
    </aside>
  );
}

function CharacteristicRow({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex justify-between px-5 py-3">
      <span className="text-sm text-gray-500">{label}</span>
      <span className="text-sm font-medium text-right max-w-[60%]">{value}</span>
    </div>
  );
}
```

---

#### 8.3.3 ApartmentsSection â€” Ğ¡ĞµĞºÑ†Ğ¸Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸

**Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
> ĞĞ³ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ½ÑƒĞ¶Ğ½ÑƒÑ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñƒ Ğ² Ğ–Ğš, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ¸ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ.

**UI:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ id Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ] [Ğ¢Ğ¸Ğ¿ â–¼] [Ğ¦ĞµĞ½Ğ° Ğ¾Ñ‚-Ğ´Ğ¾ â–¼] [Ğ¡Ñ€Ğ¾Ğº â–¼] [Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹]  â”‚
â”‚                                                          [34 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â‰¡ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°]  [âŠ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸]  [âŠŸ Ğ¨Ğ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ°]                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3 Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ â€¢ ĞšĞ¾Ñ€Ğ¿ÑƒÑ 2 â€¢ Ğ¡Ğ´Ğ°Ğ½                           34 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Ğ¡Ñ‚ÑƒĞ´Ğ¸Ğ¸      24 Ğ¼Â² - 24.7 Ğ¼Â²      Ğ¾Ñ‚ 3 000 000 â‚½       [4 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹] â”‚ â”‚
â”‚ â”‚ 1-Ğº.ĞºĞ²      37.5 Ğ¼Â² - 44.3 Ğ¼Â²    4 350 000 - 5 581 800 â‚½  [30 ĞºĞ²] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:**

```tsx
interface ApartmentsSectionProps {
  complexId: number;
  buildings: Building[];
}

type ApartmentsViewMode = 'table' | 'plans' | 'chess';

function ApartmentsSection({ complexId, buildings }: ApartmentsSectionProps) {
  const [viewMode, setViewMode] = useState<ApartmentsViewMode>('table');
  const [filters, setFilters] = useState({
    search: '',
    type: null,
    priceMin: null,
    priceMax: null,
    deadline: null,
  });

  return (
    <section id="apartments" className="scroll-mt-24">
      <h2 className="text-2xl font-semibold mb-6">ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹</h2>

      {/* Filters row */}
      <div className="flex flex-wrap gap-3 mb-6">
        <div className="relative flex-1 min-w-[200px]">
          <SearchIcon className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" />
          <input
            type="text"
            placeholder="ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ id Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹"
            className="w-full pl-10 pr-4 py-2 border rounded-lg"
            value={filters.search}
            onChange={(e) => setFilters(f => ({ ...f, search: e.target.value }))}
          />
        </div>

        <select className="px-4 py-2 border rounded-lg">
          <option value="">Ğ¢Ğ¸Ğ¿ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹</option>
          <option value="studio">Ğ¡Ñ‚ÑƒĞ´Ğ¸Ñ</option>
          <option value="1">1-ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ</option>
          <option value="2">2-ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ</option>
          <option value="3">3-ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ½Ğ°Ñ</option>
          <option value="4">4+ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚</option>
        </select>

        <select className="px-4 py-2 border rounded-lg">
          <option value="">Ğ¦ĞµĞ½Ğ° Ğ¾Ñ‚-Ğ´Ğ¾, â‚½</option>
          <option value="0-5">Ğ´Ğ¾ 5 Ğ¼Ğ»Ğ½</option>
          <option value="5-10">5-10 Ğ¼Ğ»Ğ½</option>
          <option value="10-15">10-15 Ğ¼Ğ»Ğ½</option>
          <option value="15+">Ğ¾Ñ‚ 15 Ğ¼Ğ»Ğ½</option>
        </select>

        <select className="px-4 py-2 border rounded-lg">
          <option value="">Ğ¡Ñ€Ğ¾Ğº ÑĞ´Ğ°Ñ‡Ğ¸</option>
          <option value="done">Ğ¡Ğ´Ğ°Ğ½</option>
          <option value="2025">2025</option>
          <option value="2026">2026</option>
        </select>

        <button className="px-4 py-2 border rounded-lg flex items-center gap-2">
          <FilterIcon className="w-4 h-4" />
          Ğ’ÑĞµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹
        </button>

        <button className="px-6 py-2 bg-blue-600 text-white rounded-lg">
          34 ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹
        </button>
      </div>

      {/* View mode switcher */}
      <div className="flex gap-1 mb-6 p-1 bg-gray-100 rounded-lg w-fit">
        <button
          className={cn(
            'px-4 py-2 rounded-md flex items-center gap-2 transition-colors',
            viewMode === 'table' ? 'bg-white shadow-sm' : 'hover:bg-gray-200'
          )}
          onClick={() => setViewMode('table')}
        >
          <TableIcon className="w-4 h-4" />
          Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°
        </button>
        <button
          className={cn(
            'px-4 py-2 rounded-md flex items-center gap-2 transition-colors',
            viewMode === 'plans' ? 'bg-white shadow-sm' : 'hover:bg-gray-200'
          )}
          onClick={() => setViewMode('plans')}
        >
          <GridIcon className="w-4 h-4" />
          ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
        </button>
        <button
          className={cn(
            'px-4 py-2 rounded-md flex items-center gap-2 transition-colors',
            viewMode === 'chess' ? 'bg-white shadow-sm' : 'hover:bg-gray-200'
          )}
          onClick={() => setViewMode('chess')}
        >
          <ChessIcon className="w-4 h-4" />
          ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹ Ğ½Ğ° ÑˆĞ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞµ
        </button>
      </div>

      {/* Buildings list */}
      <div className="space-y-6">
        {buildings.map(building => (
          <BuildingApartmentsCard
            key={building.id}
            building={building}
            viewMode={viewMode}
          />
        ))}
      </div>
    </section>
  );
}
```

---

#### 8.3.4 BuildingApartmentsCard â€” ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ĞºĞ¾Ñ€Ğ¿ÑƒÑĞ° Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ°Ğ¼Ğ¸

```tsx
interface BuildingApartmentsCardProps {
  building: Building;
  viewMode: ApartmentsViewMode;
}

interface RoomTypeStats {
  type: string;           // "Ğ¡Ñ‚ÑƒĞ´Ğ¸Ğ¸", "1-Ğº.ĞºĞ²", "2-Ğº.ĞºĞ²"
  areaMin: number;
  areaMax: number;
  priceMin: number;
  priceMax: number;
  count: number;
}

function BuildingApartmentsCard({ building, viewMode }: BuildingApartmentsCardProps) {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <div className="border rounded-lg overflow-hidden">
      {/* Header */}
      <div className="bg-amber-50 px-6 py-4 flex items-center justify-between">
        <div className="flex items-center gap-3">
          <span className="px-3 py-1 bg-amber-100 rounded-full text-sm font-medium">
            {building.phase} â€¢ {building.name} â€¢ {building.status}
          </span>
        </div>
        <span className="text-sm text-gray-600">{building.apartments_count} ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹</span>
      </div>

      {/* Room types summary (collapsed view) */}
      {!isExpanded && viewMode === 'table' && (
        <div className="divide-y">
          {building.room_stats.map((stats, idx) => (
            <div
              key={idx}
              className="px-6 py-4 flex items-center justify-between hover:bg-gray-50 cursor-pointer"
              onClick={() => setIsExpanded(true)}
            >
              <span className="font-medium w-20">{stats.type}</span>
              <span className="text-gray-500 w-40">
                {stats.areaMin} Ğ¼Â² - {stats.areaMax} Ğ¼Â²
              </span>
              <span className="font-semibold w-48">
                {formatPrice(stats.priceMin)}
                {stats.priceMin !== stats.priceMax && ` - ${formatPrice(stats.priceMax)}`}
              </span>
              <span className="px-3 py-1 bg-gray-100 rounded-full text-sm">
                {stats.count} ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€{stats.count > 1 ? 'Ñ‹' : 'Ğ°'}
              </span>
            </div>
          ))}
        </div>
      )}

      {/* Expanded view with individual apartments */}
      {isExpanded && (
        <div className="p-6">
          {viewMode === 'table' && <ApartmentsTable buildingId={building.id} />}
          {viewMode === 'plans' && <ApartmentsPlansGrid buildingId={building.id} />}
          {viewMode === 'chess' && <ApartmentsChessBoard buildingId={building.id} />}

          <button
            className="mt-4 text-blue-600 hover:underline"
            onClick={() => setIsExpanded(false)}
          >
            Ğ¡Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ
          </button>
        </div>
      )}
    </div>
  );
}
```

---

#### 8.3.5 ChessBoard â€” Ğ¨Ğ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ° (Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ÑÑ‚Ğ°Ğ¶Ğ°Ğ¼)

**UI:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ğ¨ĞĞ¥ĞœĞĞ¢ĞšĞ ĞšĞĞ ĞŸĞ£Ğ¡Ğ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚ Ğ¡ĞµĞºÑ†Ğ¸Ñ 1      â”‚ Ğ¡ĞµĞºÑ†Ğ¸Ñ 2      â”‚ Ğ¡ĞµĞºÑ†Ğ¸Ñ 3      â”‚         â”‚
â”‚ Ğ­Ñ‚Ğ°Ğ¶ â”‚ 1  2  3  4    â”‚ 1  2  3  4    â”‚ 1  2  3  4    â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  25  â”‚ â–   â–   â–¡  â–     â”‚ â–¡  â–¡  â–   â–     â”‚ â–   â–   â–   â–¡    â”‚         â”‚
â”‚  24  â”‚ â–¡  â–   â–   â–¡    â”‚ â–   â–¡  â–¡  â–     â”‚ â–¡  â–   â–¡  â–     â”‚         â”‚
â”‚  23  â”‚ â–   â–¡  â–   â–     â”‚ â–   â–   â–   â–¡    â”‚ â–   â–¡  â–   â–     â”‚         â”‚
â”‚ ...  â”‚ ...           â”‚ ...           â”‚ ...           â”‚         â”‚
â”‚   2  â”‚ â–¡  â–¡  â–¡  â–¡    â”‚ â–   â–   â–   â–     â”‚ â–¡  â–¡  â–¡  â–¡    â”‚         â”‚
â”‚   1  â”‚ â€”  â€”  â€”  â€”    â”‚ â€”  â€”  â€”  â€”    â”‚ â€”  â€”  â€”  â€”    â”‚ ĞºĞ¾Ğ¼Ğ¼ĞµÑ€Ñ† â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°: â–  Ğ’ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ  â–¡ ĞŸÑ€Ğ¾Ğ´Ğ°Ğ½Ğ¾  â— Ğ‘Ñ€Ğ¾Ğ½ÑŒ  â€” ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ñ
```

```tsx
interface ChessBoardProps {
  buildingId: number;
}

interface ChessCell {
  floor: number;
  section: number;
  position: number;
  status: 'available' | 'sold' | 'reserved' | 'commercial';
  apartment?: {
    id: number;
    rooms: number;
    area: number;
    price: number;
  };
}

function ApartmentsChessBoard({ buildingId }: ChessBoardProps) {
  const [cells, setCells] = useState<ChessCell[][]>([]);
  const [hoveredCell, setHoveredCell] = useState<ChessCell | null>(null);

  // Load chess data
  useEffect(() => {
    api.getBuildingChessboard(buildingId).then(setCells);
  }, [buildingId]);

  const getStatusColor = (status: ChessCell['status']) => {
    switch (status) {
      case 'available': return 'bg-green-500 hover:bg-green-600';
      case 'sold': return 'bg-gray-300';
      case 'reserved': return 'bg-yellow-500';
      case 'commercial': return 'bg-blue-200';
    }
  };

  return (
    <div className="relative">
      {/* Chess grid */}
      <div className="overflow-x-auto">
        <table className="border-collapse">
          <thead>
            <tr>
              <th className="px-2 py-1 text-sm text-gray-500">Ğ­Ñ‚Ğ°Ğ¶</th>
              {/* Section headers */}
              {sections.map(section => (
                <th key={section} colSpan={4} className="px-4 py-2 text-center border-b">
                  Ğ¡ĞµĞºÑ†Ğ¸Ñ {section}
                </th>
              ))}
            </tr>
          </thead>
          <tbody>
            {floors.reverse().map(floor => (
              <tr key={floor}>
                <td className="px-2 py-1 text-sm text-gray-500 text-right">{floor}</td>
                {cells[floor].map((cell, idx) => (
                  <td key={idx} className="p-1">
                    <button
                      className={cn(
                        'w-8 h-8 rounded text-xs font-medium transition-colors',
                        getStatusColor(cell.status),
                        cell.status === 'available' && 'cursor-pointer'
                      )}
                      onMouseEnter={() => setHoveredCell(cell)}
                      onMouseLeave={() => setHoveredCell(null)}
                      onClick={() => cell.apartment && window.open(`/offers/${cell.apartment.id}`)}
                      disabled={cell.status !== 'available'}
                    >
                      {cell.apartment?.rooms || 'â€”'}
                    </button>
                  </td>
                ))}
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {/* Hover tooltip */}
      {hoveredCell?.apartment && (
        <div className="absolute z-10 bg-white border rounded-lg shadow-lg p-4 pointer-events-none">
          <div className="font-semibold">
            {formatRooms(hoveredCell.apartment.rooms)}
          </div>
          <div className="text-sm text-gray-500">
            {hoveredCell.apartment.area} Ğ¼Â²
          </div>
          <div className="text-lg font-semibold mt-2">
            {formatPrice(hoveredCell.apartment.price)}
          </div>
        </div>
      )}

      {/* Legend */}
      <div className="flex gap-6 mt-4 text-sm">
        <div className="flex items-center gap-2">
          <span className="w-4 h-4 bg-green-500 rounded"></span>
          Ğ’ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ
        </div>
        <div className="flex items-center gap-2">
          <span className="w-4 h-4 bg-gray-300 rounded"></span>
          ĞŸÑ€Ğ¾Ğ´Ğ°Ğ½Ğ¾
        </div>
        <div className="flex items-center gap-2">
          <span className="w-4 h-4 bg-yellow-500 rounded"></span>
          Ğ‘Ñ€Ğ¾Ğ½ÑŒ
        </div>
        <div className="flex items-center gap-2">
          <span className="w-4 h-4 bg-blue-200 rounded"></span>
          ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ñ
        </div>
      </div>
    </div>
  );
}
```

---

#### 8.3.6 InteractivePlan â€” Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°

```tsx
function InteractivePlan({ complexId }: { complexId: number }) {
  const [buildings, setBuildings] = useState<BuildingOnPlan[]>([]);
  const [selectedBuilding, setSelectedBuilding] = useState<BuildingOnPlan | null>(null);

  return (
    <section id="plan" className="scroll-mt-24">
      <h2 className="text-2xl font-semibold mb-6">ĞŸĞ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°</h2>

      <div className="relative aspect-[16/9] bg-gray-100 rounded-lg overflow-hidden">
        {/* 3D render or plan image */}
        <img
          src={`/api/complexes/${complexId}/plan-image`}
          alt="ĞŸĞ»Ğ°Ğ½ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ°"
          className="w-full h-full object-contain"
        />

        {/* Clickable building areas */}
        {buildings.map(building => (
          <button
            key={building.id}
            className="absolute"
            style={{
              left: `${building.position.x}%`,
              top: `${building.position.y}%`,
              width: `${building.position.width}%`,
              height: `${building.position.height}%`,
            }}
            onClick={() => setSelectedBuilding(building)}
          >
            <div className="w-full h-full border-2 border-transparent hover:border-blue-500 hover:bg-blue-500/10 transition-colors rounded" />
          </button>
        ))}

        {/* Building popup */}
        {selectedBuilding && (
          <div
            className="absolute bg-white rounded-lg shadow-lg p-4 w-64 z-10"
            style={{
              left: `${selectedBuilding.position.x + selectedBuilding.position.width/2}%`,
              top: `${selectedBuilding.position.y}%`,
              transform: 'translate(-50%, -110%)',
            }}
          >
            <button
              className="absolute top-2 right-2 text-gray-400 hover:text-gray-600"
              onClick={() => setSelectedBuilding(null)}
            >
              Ã—
            </button>

            <h3 className="font-semibold mb-1">{selectedBuilding.name}</h3>
            <p className="text-sm text-gray-500 mb-3">{selectedBuilding.deadline}</p>

            <div className="space-y-2 text-sm">
              {selectedBuilding.roomStats.map(stat => (
                <div key={stat.type} className="flex justify-between">
                  <span>{stat.type}</span>
                  <span className="font-medium">Ğ¾Ñ‚ {formatPrice(stat.minPrice)}</span>
                </div>
              ))}
            </div>

            <a
              href={`#apartments?building=${selectedBuilding.id}`}
              className="block mt-4 text-blue-600 hover:underline text-sm"
            >
              {selectedBuilding.apartmentsCount} ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ â†’
            </a>
          </div>
        )}

        {/* Fullscreen button */}
        <button className="absolute top-4 right-4 w-10 h-10 bg-white rounded-lg shadow flex items-center justify-center hover:bg-gray-50">
          â›¶
        </button>
      </div>
    </section>
  );
}
```

---

#### 8.3.7 LocationSection â€” ĞšĞ°Ñ€Ñ‚Ğ° Ñ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹

```tsx
function LocationSection({ complex }: { complex: ComplexDetail }) {
  const [activeLayer, setActiveLayer] = useState<'apartments' | 'infrastructure'>('apartments');
  const [infrastructureCategories, setInfrastructureCategories] = useState({
    schools: true,
    kindergartens: true,
    hospitals: true,
    shops: true,
    parks: true,
  });

  return (
    <section id="location" className="scroll-mt-24">
      <h2 className="text-2xl font-semibold mb-6">ĞĞ° ĞºĞ°Ñ€Ñ‚Ğµ</h2>

      {/* Map controls */}
      <div className="flex flex-wrap gap-3 mb-4">
        <button
          className={cn(
            'px-4 py-2 rounded-lg flex items-center gap-2',
            activeLayer === 'infrastructure' ? 'bg-blue-600 text-white' : 'bg-gray-100'
          )}
          onClick={() => setActiveLayer('infrastructure')}
        >
          <BuildingIcon className="w-4 h-4" />
          Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
        </button>
        <button
          className={cn(
            'px-4 py-2 rounded-lg',
            activeLayer === 'apartments' ? 'bg-blue-600 text-white' : 'bg-gray-100'
          )}
          onClick={() => setActiveLayer('apartments')}
        >
          ĞšĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñ‹
        </button>
        <button className="px-4 py-2 bg-gray-100 rounded-lg text-gray-400" disabled>
          ĞŸĞ°Ñ€ĞºĞ¸Ğ½Ğ³Ğ¾Ğ² Ğ½ĞµÑ‚
        </button>
        <button className="px-4 py-2 bg-gray-100 rounded-lg text-gray-400" disabled>
          ĞšĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ğ¸ Ğ½ĞµÑ‚
        </button>
      </div>

      {/* Map container */}
      <div className="relative aspect-[16/9] rounded-lg overflow-hidden">
        <YandexMapAdvanced
          center={[complex.latitude, complex.longitude]}
          zoom={15}
          markers={[
            {
              id: complex.id,
              position: [complex.latitude, complex.longitude],
              label: `${complex.buildings[0]?.name} Â· ${complex.buildings[0]?.status}`,
              type: 'complex',
            },
          ]}
          showInfrastructure={activeLayer === 'infrastructure'}
          infrastructureRadius={2000} // 2 km
          infrastructureCategories={infrastructureCategories}
        />

        {/* Map toolbar */}
        <div className="absolute top-4 right-4 flex flex-col gap-2">
          <button className="px-3 py-2 bg-white rounded shadow text-sm hover:bg-gray-50">
            ĞŸĞ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ñ‹
          </button>
          <button className="px-3 py-2 bg-white rounded shadow text-sm hover:bg-gray-50">
            3D
          </button>
          <button className="px-3 py-2 bg-white rounded shadow text-sm hover:bg-gray-50">
            Ğ›Ğ¸Ğ½ĞµĞ¹ĞºĞ°
          </button>
          <button className="px-3 py-2 bg-white rounded shadow text-sm hover:bg-gray-50">
            ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
          </button>
        </div>

        {/* Legend */}
        <div className="absolute bottom-4 left-4 flex gap-4 bg-white/90 rounded-lg px-4 py-2 text-sm">
          <span className="flex items-center gap-1">
            <span className="w-3 h-3 bg-green-500 rounded-full"></span>
            Ğ¡Ğ´Ğ°Ğ½
          </span>
          <span className="flex items-center gap-1">
            <span className="w-3 h-3 bg-yellow-500 rounded-full"></span>
            2025
          </span>
          <span className="flex items-center gap-1">
            <span className="w-3 h-3 bg-orange-500 rounded-full"></span>
            2026
          </span>
          <span className="flex items-center gap-1">
            <span className="w-3 h-3 bg-red-500 rounded-full"></span>
            2027+
          </span>
        </div>
      </div>
    </section>
  );
}
```

---

### 8.4 Backend API Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ–Ğš

#### ĞĞ¾Ğ²Ñ‹Ğµ endpoints:

```typescript
// GET /api/complexes/:id/full
// Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ–Ğš Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
interface ComplexFullResponse {
  // Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
  id: number;
  name: string;
  address: string;
  district: string;
  metro_station: string;
  metro_distance: number;

  // Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
  developer: {
    id: number;
    name: string;
    logo: string;
  };
  property_class: string;
  building_type: string;
  facade: string;
  has_escrow: boolean;
  payment_methods: string[];
  contract_type: string;

  // Ğ“Ğ°Ğ»ĞµÑ€ĞµÑ
  images: {
    url: string;
    type: 'exterior' | 'interior' | 'plan' | 'render';
    order: number;
  }[];

  // ĞšĞ¾Ñ€Ğ¿ÑƒÑĞ°
  buildings: {
    id: number;
    name: string;
    phase: string;
    status: 'completed' | 'building';
    completion_date: string;
    floors: number;
    sections: number;
    apartments_count: number;
    room_stats: RoomTypeStats[];
  }[];

  // ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹
  latitude: number;
  longitude: number;

  // ĞĞºÑ†Ğ¸Ğ¸
  promotions_count: number;
  super_promotions_count: number;

  // Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  has_mortgage: boolean;
  mortgage_programs: MortgageProgram[];
  has_installment: boolean;
  installment_terms: InstallmentTerm[];

  // ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
  description: string;
  features: {
    icon: string;
    title: string;
    description: string;
  }[];

  // ĞÑ‚Ğ´ĞµĞ»ĞºĞ°
  finishing_options: {
    id: number;
    name: string;
    description: string;
    price_per_sqm: number;
    images: string[];
  }[];

  // Ğ¤Ğ°Ğ¹Ğ»Ñ‹
  files: {
    name: string;
    url: string;
    type: 'pdf' | 'image' | 'document';
    size: number;
  }[];
}

// GET /api/buildings/:id/chessboard
// Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ ÑˆĞ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ¸
interface ChessboardResponse {
  building_id: number;
  floors: number;
  sections: number;
  cells: {
    floor: number;
    section: number;
    position: number;
    status: 'available' | 'sold' | 'reserved' | 'commercial';
    apartment_id?: number;
    rooms?: number;
    area?: number;
    price?: number;
  }[];
}

// GET /api/complexes/:id/plan
// Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ğ°
interface ComplexPlanResponse {
  plan_image_url: string;
  buildings: {
    id: number;
    name: string;
    position: { x: number; y: number; width: number; height: number };
    status: string;
    deadline: string;
    apartments_count: number;
    room_stats: RoomTypeStats[];
  }[];
}
```

---

### 8.5 Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ¿Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ–Ğš

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞÑ†ĞµĞ½ĞºĞ° | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ |
|----|--------|--------|-------------|
| **C1** | **Hero Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ** |||
| C1.1 | Backend: Ñ€Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ /api/complexes/:id Ñ images, buildings | 4h | - |
| C1.2 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ComplexHero Ñ Ğ³Ğ°Ğ»ĞµÑ€ĞµĞµĞ¹ | 4h | C1.1 |
| C1.3 | Frontend: Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ñ‹ Ñ ÑĞºĞ¾Ñ€ÑĞ¼Ğ¸ | 2h | C1.2 |
| C1.4 | Frontend: Lightbox Ğ´Ğ»Ñ Ğ³Ğ°Ğ»ĞµÑ€ĞµĞ¸ | 2h | - |
| **C2** | **Sidebar** |||
| C2.1 | Backend: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ characteristics Ğ² API | 3h | - |
| C2.2 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ComplexSidebar | 3h | C2.1 |
| C2.3 | Frontend: sticky Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 1h | C2.2 |
| **C3** | **Ğ¡ĞµĞºÑ†Ğ¸Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€** |||
| C3.1 | Frontend: ApartmentsSection Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸ | 4h | - |
| C3.2 | Frontend: BuildingApartmentsCard | 3h | C3.1 |
| C3.3 | Frontend: ViewMode switcher (Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°/Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸/ÑˆĞ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ°) | 2h | C3.2 |
| C3.4 | Backend: endpoint /api/buildings/:id/apartments | 3h | - |
| **C4** | **Ğ¨Ğ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ°** |||
| C4.1 | Backend: endpoint /api/buildings/:id/chessboard | 4h | - |
| C4.2 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ChessBoard | 6h | C4.1 |
| C4.3 | Frontend: hover tooltips Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ | 2h | C4.2 |
| **C5** | **ĞšĞ°Ñ€Ñ‚Ğ°** |||
| C5.1 | Frontend: LocationSection Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ | 4h | - |
| C5.2 | Frontend: ÑĞ»Ğ¾Ğ¸ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ | 3h | C5.1 |
| C5.3 | Frontend: toolbar ĞºĞ°Ñ€Ñ‚Ñ‹ (Ğ¿Ğ°Ğ½Ğ¾Ñ€Ğ°Ğ¼Ñ‹, 3D, Ğ»Ğ¸Ğ½ĞµĞ¹ĞºĞ°) | 2h | C5.1 |
| **C6** | **Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½** |||
| C6.1 | Backend: endpoint /api/complexes/:id/plan | 3h | - |
| C6.2 | Frontend: ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ InteractivePlan | 4h | C6.1 |
| C6.3 | Frontend: popups Ğ½Ğ° ĞºĞ¾Ñ€Ğ¿ÑƒÑĞ°Ñ… | 2h | C6.2 |
| **C7** | **Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞµĞºÑ†Ğ¸Ğ¸** |||
| C7.1 | Frontend: ÑĞµĞºÑ†Ğ¸Ñ "ĞĞ± Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğµ" Ñ features grid | 2h | - |
| C7.2 | Frontend: ÑĞµĞºÑ†Ğ¸Ñ "ĞÑ‚Ğ´ĞµĞ»ĞºĞ°" | 3h | - |
| C7.3 | Frontend: ÑĞµĞºÑ†Ğ¸Ñ "Ğ¤Ğ°Ğ¹Ğ»Ñ‹" | 2h | - |
| C7.4 | Frontend: ÑĞµĞºÑ†Ğ¸Ñ "ĞĞºÑ†Ğ¸Ğ¸" | 2h | - |
| **C8** | **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** |||
| C8.1 | Frontend: ÑĞ±Ğ¾Ñ€ĞºĞ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ /complexes/[id] | 4h | C1-C7 |
| C8.2 | Responsive Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ | 4h | C8.1 |
| C8.3 | Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | 4h | C8.2 |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Ğ¤Ğ°Ğ·Ğ° 5: ~82 Ñ‡Ğ°ÑĞ°** (~10 Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ´Ğ½ĞµĞ¹)

---

### 8.6 ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ñ€Ğ¾Ğ°Ğ´Ğ¼Ğ°Ğ¿ Ñ Ğ¤Ğ°Ğ·Ğ¾Ğ¹ 5

#### Sprint 5 (1.5 Ğ½ĞµĞ´ĞµĞ»Ğ¸) â€” Complex Detail Page
1. Hero Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ (12h)
2. Sidebar (7h)
3. Ğ¡ĞµĞºÑ†Ğ¸Ñ ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€ (12h)
4. Ğ¨Ğ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ° (12h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 5: ~43h**

#### Sprint 6 (1 Ğ½ĞµĞ´ĞµĞ»Ñ) â€” Complex Features
1. ĞšĞ°Ñ€Ñ‚Ğ° Ñ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹ (9h)
2. Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ (9h)
3. Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞµĞºÑ†Ğ¸Ğ¸ (9h)
4. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (12h)

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Sprint 6: ~39h**

---

### 8.7 ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ğ°Ñ ÑĞ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°

| Ğ¤Ğ°Ğ·Ğ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞÑ†ĞµĞ½ĞºĞ° | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ |
|------|----------|--------|-----------|
| 1 | Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | 50h | P1 |
| 2 | Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ | 43h | P1 |
| 3 | ĞĞ³ĞµĞ½Ñ‚ÑĞºĞ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ | 50h | P2 |
| 4 | Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ | ~30h | P2 |
| **5** | **Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ–Ğš** | **82h** | **P1** |

**ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¸Ñ‚Ğ¾Ğ³: ~255 Ñ‡Ğ°ÑĞ¾Ğ²** (~32 Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ´Ğ½Ñ)

---

## 9. ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ: Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ–Ğš

### Database schema additions

```sql
-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ ĞºĞ¾Ñ€Ğ¿ÑƒÑĞ¾Ğ² Ğ½Ğ° Ğ¿Ğ»Ğ°Ğ½Ğµ
CREATE TABLE building_plan_positions (
  id SERIAL PRIMARY KEY,
  building_id BIGINT REFERENCES buildings(id),
  complex_id BIGINT REFERENCES complexes(id),
  x_percent DECIMAL(5,2),
  y_percent DECIMAL(5,2),
  width_percent DECIMAL(5,2),
  height_percent DECIMAL(5,2)
);

-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ†Ğ¸Ğ¹ Ğ¾Ñ‚Ğ´ĞµĞ»ĞºĞ¸
CREATE TABLE finishing_options (
  id SERIAL PRIMARY KEY,
  complex_id BIGINT REFERENCES complexes(id),
  name VARCHAR(100),
  description TEXT,
  price_per_sqm DECIMAL(10,2),
  is_included BOOLEAN DEFAULT false
);

-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¾Ñ‚Ğ´ĞµĞ»ĞºĞ¸
CREATE TABLE finishing_images (
  id SERIAL PRIMARY KEY,
  finishing_option_id INTEGER REFERENCES finishing_options(id),
  url VARCHAR(500),
  order_num INTEGER DEFAULT 0
);

-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ–Ğš
CREATE TABLE complex_files (
  id SERIAL PRIMARY KEY,
  complex_id BIGINT REFERENCES complexes(id),
  name VARCHAR(255),
  url VARCHAR(500),
  file_type VARCHAR(20), -- 'pdf', 'image', 'document'
  file_size INTEGER,
  uploaded_at TIMESTAMP DEFAULT NOW()
);

-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ°ĞºÑ†Ğ¸Ğ¹
CREATE TABLE promotions (
  id SERIAL PRIMARY KEY,
  complex_id BIGINT REFERENCES complexes(id),
  title VARCHAR(255),
  description TEXT,
  is_super BOOLEAN DEFAULT false,
  start_date DATE,
  end_date DATE,
  is_active BOOLEAN DEFAULT true
);

-- Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ complexes
ALTER TABLE complexes ADD COLUMN IF NOT EXISTS property_class VARCHAR(50);
ALTER TABLE complexes ADD COLUMN IF NOT EXISTS facade_type VARCHAR(100);
ALTER TABLE complexes ADD COLUMN IF NOT EXISTS has_escrow BOOLEAN DEFAULT false;
ALTER TABLE complexes ADD COLUMN IF NOT EXISTS contract_type VARCHAR(20);
ALTER TABLE complexes ADD COLUMN IF NOT EXISTS plan_image_url VARCHAR(500);

-- Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ buildings Ğ´Ğ»Ñ ÑˆĞ°Ñ…Ğ¼Ğ°Ñ‚ĞºĞ¸
ALTER TABLE buildings ADD COLUMN IF NOT EXISTS sections_count INTEGER DEFAULT 1;
```

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½: 2025-11-30*
*ĞĞ²Ñ‚Ğ¾Ñ€: Claude Code Assistant*
*Ğ’ĞµÑ€ÑĞ¸Ñ: 2.1*
