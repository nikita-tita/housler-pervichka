# Сводка по анализу XML-фида недвижимости

## Основная информация

**Файл:** спб_.xml
**Размер:** 67.8 МБ
**Количество объявлений:** 12,020
**Формат:** Yandex Realty Feed
**Регион:** Санкт-Петербург
**Дата генерации:** 2025-10-28

---

## Структура данных XML

```xml
<realty-feed>
  <generation-date/>
  <offer internal-id="уникальный_id">
    <!-- Базовая информация -->
    <type>продажа</type>
    <property-type>жилая</property-type>
    <category>квартира</category>

    <!-- Характеристики квартиры -->
    <rooms>0-7</rooms>
    <studio>0/1</studio>
    <floor>1-40</floor>
    <floors-total>1-40</floors-total>
    <renovation>тип отделки</renovation>
    <balcony>есть/нет</balcony>
    <bathroom-unit>тип</bathroom-unit>

    <!-- Площади -->
    <area><value>кв.м</value></area>
    <living-space><value>кв.м</value></living-space>
    <kitchen-space><value>кв.м</value></kitchen-space>

    <!-- Цена -->
    <price><value>рубли</value></price>
    <mortgage>true/false</mortgage>

    <!-- Здание -->
    <building-name>Название ЖК</building-name>
    <building-type>тип</building-type>
    <building-state>состояние</building-state>
    <built-year>год</built-year>
    <ready-quarter>квартал</ready-quarter>

    <!-- Местоположение -->
    <location>
      <address>адрес</address>
      <district>район</district>
      <coordinates>lat/lng</coordinates>
      <metro>
        <name>станция</name>
        <time-on-foot>минуты</time-on-foot>
      </metro>
    </location>

    <!-- Изображения -->
    <image tag="plan">URL</image>
    <image tag="housemain">URL</image>
    <image tag="floorplan">URL</image>

    <!-- Контакты -->
    <sales-agent>
      <phone/>
      <email/>
      <organization/>
    </sales-agent>

    <description>текст</description>
  </offer>
</realty-feed>
```

---

## Статистика по типам данных

### Общая информация
- **Все объявления:** Продажа жилой недвижимости (квартиры)
- **Новостройки:** 100% (все объявления - первичный рынок)

### Распределение по количеству комнат

| Комнат | Количество | Процент |
|--------|------------|---------|
| Студия (0) | 1,332 | 11.1% |
| 1 комната | 6,512 | 54.2% |
| 2 комнаты | 3,040 | 25.3% |
| 3 комнаты | 1,036 | 8.6% |
| 4 комнаты | 80 | 0.7% |
| 5+ комнат | 20 | 0.2% |

**Вывод:** Наибольшим спросом пользуются 1-комнатные квартиры (54%)

### Типы отделки

| Тип отделки | Количество | Процент |
|-------------|------------|---------|
| Подготовка под чистовую отделку | 3,637 | 30.3% |
| Отделка "под ключ" | 3,307 | 27.5% |
| Чистовая отделка | 2,540 | 21.1% |
| Черновая отделка | 2,519 | 21.0% |

**Вывод:** Относительно равномерное распределение по типам отделки

### Типы зданий

| Тип здания | Количество | Процент |
|------------|------------|---------|
| Кирпично-монолитный | 7,051 | 58.7% |
| Монолитный | 2,040 | 17.0% |
| Панельный | 1,201 | 10.0% |
| Монолитно-каркасный | 1,174 | 9.8% |
| Другие | 554 | 4.6% |

**Вывод:** Преобладают кирпично-монолитные дома (59%)

### Состояние строительства

| Состояние | Количество | Процент |
|-----------|------------|---------|
| В процессе (unfinished) | 9,291 | 77.3% |
| Сдан (hand-over) | 2,729 | 22.7% |

**Вывод:** Большинство объектов - в процессе строительства

### Распределение по районам (TOP-13)

| Район | Количество | Процент |
|-------|------------|---------|
| Невский | 940 | 7.8% |
| Приморский | 710 | 5.9% |
| Калининский | 586 | 4.9% |
| Василеостровский | 489 | 4.1% |
| Московский | 486 | 4.0% |
| Фрунзенский | 367 | 3.1% |
| Выборгский | 221 | 1.8% |
| Центральный | 194 | 1.6% |
| Красногвардейский | 162 | 1.3% |
| Петроградский | 134 | 1.1% |
| Кировский | 122 | 1.0% |
| Адмиралтейский | 112 | 0.9% |
| Красносельский | 27 | 0.2% |
| **Прочие районы** | **7,470** | **62.2%** |

**Вывод:** Невский район лидирует по количеству предложений

### ТОП-15 жилых комплексов

| ЖК | Количество объявлений |
|----|-----------------------|
| Новатория | 669 |
| Про.Молодость | 660 |
| OKLA | 450 |
| ЯСНО.Янино | 449 |
| Энфилд | 445 |
| RESPECT | 416 |
| SERTOLOVO PARK | 403 |
| Ассамблея | 380 |
| Загляденье | 376 |
| А101 Лаголово | 321 |
| Рождественский квартал | 284 |
| Pixel | 276 |
| PLUS Пулковский | 275 |
| Дубровский | 262 |
| Дом на Курской | 258 |

---

## Типы изображений

| Тип изображения | Наличие | Процент |
|-----------------|---------|---------|
| Главное фото дома (housemain) | 12,020 | 100% |
| План квартиры (plan) | 12,007 | 99.9% |
| План этажа (floorplan) | 11,761 | 97.8% |
| Схема комплекса (complexscheme) | 1,902 | 15.8% |
| Дополнительные фото | ~36,000+ | ~300% |

**Среднее количество фото на объявление:** ~5-7 изображений

---

## Ключевые поля для фильтрации

### Обязательные поля (100% заполненность)
- ✅ Тип сделки (type)
- ✅ Категория (category)
- ✅ Количество комнат (rooms)
- ✅ Этаж (floor/floors_total)
- ✅ Общая площадь (area)
- ✅ Цена (price)
- ✅ Адрес (location/address)
- ✅ Координаты (latitude/longitude)
- ✅ Название ЖК (building-name)
- ✅ Тип здания (building-type)
- ✅ Главное фото (housemain)

### Часто заполняемые поля (>95%)
- ✅ План квартиры (plan) - 99.9%
- ✅ План этажа (floorplan) - 97.8%
- ✅ Жилая площадь (living-space)
- ✅ Площадь кухни (kitchen-space)
- ✅ Метро (metro/name)
- ✅ Тип отделки (renovation)
- ✅ Балкон (balcony)
- ✅ Санузел (bathroom-unit)

### Опциональные поля
- ⚠️ Высота потолков (ceiling-height) - часто 0
- ⚠️ Схема комплекса (complexscheme) - 15.8%
- ⚠️ Застройщик - извлекается из описания

---

## Рекомендации по парсингу

### Критичные проверки
1. **Валидация координат:** Все объекты имеют координаты (обязательное поле)
2. **Проверка URL изображений:** ~99% изображений доступны
3. **Нормализация цен:** Все цены в рублях (RUR)
4. **Обработка дат:** Формат ISO 8601

### Особенности данных
- **Телефоны:** Формат +7XXXXXXXXXX
- **Email:** Имеют длинные пробелы в конце (требуется trim)
- **Описания:** Очень подробные (~2000-5000 символов)
- **Адреса:** Включают литеры и корпуса

### Расчетные поля
Рекомендуется добавить:
- Цена за м² (общая площадь)
- Цена за м² (жилая площадь)
- Процент жилой площади от общей
- Процент кухни от общей площади
- Классификация по сегментам (эконом/комфорт/бизнес/элит)

---

## Основные сценарии использования

### Поиск квартир
**Наиболее популярные фильтры:**
1. Количество комнат (rooms)
2. Диапазон цены (price_min/price_max)
3. Район (district)
4. Метро + время до метро
5. Общая площадь (area)
6. Этаж (не первый/не последний)
7. Тип отделки
8. Состояние строительства (сдан/в процессе)

### Сравнение объектов
**Ключевые метрики:**
- Цена и цена за м²
- Площади (общая/жилая/кухня)
- Расположение (район, метро)
- Срок сдачи
- Тип отделки
- Характеристики дома

### Аналитика рынка
**Агрегированные данные:**
- Средняя цена по районам
- Средняя цена по количеству комнат
- Динамика цен (требуется история)
- Популярные ЖК
- Распределение по типам зданий

---

## Техническая архитектура (рекомендации)

### База данных
```
PostgreSQL 14+ с расширениями:
├── PostGIS (геоданные)
├── pg_trgm (полнотекстовый поиск)
└── btree_gist (составные индексы)

Основные таблицы:
├── offers (объявления) - ~12K записей
├── complexes (ЖК) - ~500 записей
├── buildings (корпуса) - ~1500 записей
├── districts (районы) - 18 записей
├── metro_stations (метро) - ~70 записей
└── images (изображения) - ~60K записей
```

### API
```
REST API на Express.js/FastAPI
├── GET /api/offers (поиск + фильтрация)
├── GET /api/offers/:id (детали)
├── GET /api/complexes (список ЖК)
├── GET /api/analytics/* (статистика)
└── POST /api/favorites (избранное)

Кэширование: Redis
Поисковый движок: Elasticsearch
```

### Frontend
```
React/Next.js + TypeScript
├── Главная страница с фильтрами
├── Карточка объекта
├── Карта объектов (Yandex Maps)
├── Страница ЖК
├── Сравнение объектов
└── Личный кабинет
```

---

## Оценка объема работ

### Этап 1: MVP (4-6 недель)
- [x] Парсер XML-фидов
- [x] База данных
- [x] API для поиска
- [x] Базовый UI
- [x] Карточка объекта

### Этап 2: Основные функции (4-6 недель)
- [ ] Расширенные фильтры
- [ ] Карта объектов
- [ ] Страницы ЖК
- [ ] Сравнение
- [ ] Избранное

### Этап 3: Дополнительно (4-8 недель)
- [ ] Аналитика и статистика
- [ ] Калькуляторы
- [ ] Подписки
- [ ] Рекомендации
- [ ] Мобильная версия

---

## Потенциальные расширения

### Дополнительные источники данных
- ЦИАН API
- Авито API
- Другие региональные фиды
- Вторичный рынок

### Дополнительные функции
- Сохраненные поиски с уведомлениями
- Сравнение с другими объектами
- Прогноз изменения цен (ML)
- Рекомендательная система
- Виртуальные туры (3D)
- Интеграция с банками (ипотека)

### Монетизация
- Приоритетное размещение
- Аналитика для застройщиков
- API для партнеров
- Реклама
- Премиум-подписка для пользователей

---

## Контрольные показатели (KPI)

### Технические метрики
- Время обработки фида: < 5 минут
- Время ответа API: < 200ms (p95)
- Покрытие данными: > 99%
- Uptime: > 99.5%

### Бизнес-метрики
- Конверсия в звонок: 3-5%
- Среднее время на сайте: > 5 минут
- Повторные визиты: > 30%
- Количество сохраненных поисков: > 20% пользователей

---

## Созданные документы

1. **ТЗ_агрегатор_недвижимости.md** - Полное техническое задание
2. **database_schema.sql** - SQL схема базы данных
3. **API_examples.md** - Примеры API запросов и ответов
4. **SUMMARY.md** - Эта сводка с метриками

**Дата анализа:** 2025-11-29
**Версия:** 1.0
